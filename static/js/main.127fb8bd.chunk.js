(this.webpackJsonpafricauto=this.webpackJsonpafricauto||[]).push([[0],{123:function(e,t){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},189:function(e,t,a){},190:function(e,t,a){},191:function(e,t,a){"use strict";a.r(t);var n,r,s=a(0),o=a.n(s),c=a(31),l=a.n(c),i=a(12),u=a(4),m=a(5),d=a(6),_=a(2),p=a(7),h=(a(91),a(28)),g=a(10),v=function(e){return{type:"SET_PRODUCT_REQUESTED_ID",data:e}},f=function(e){return{type:"SET_LANG",lang:e}},E=function(e){return{type:"SET_CURRENCY",currency:e}},y=function(e){return{type:"ADD_A_NEW_MESSAGE_NOTIFICATION",data:e}},b=a(27),N=a.n(b),w=a(77),O=a.n(w),C=a(197),j=a(11),S={fr:(n={home:"accueil",inventory:"inventaire",services:"services",welcomeTo:"bienvenu chez",availableCars:"v\xe9hicules disponibles",seeMore:"voir plus",see:"voir",needHelp:"besoin d'aide",password:"mot de passe",login:"se connecter",firstName:"pr\xe9nom",lastName:"nom",confirmPassword:"confirmer mot de passe",signUp:"s'inscrire",alreadyHaveAnAccount:"D\xe9j\xe0 un compte",forgotPassword:"Mot de passe oubli\xe9",notAMemberYet:"Pas encore membre",search:"recherche",allBodyTypes:"toutes les carrosseries",allBrands:"toutes les marques",allModels:"tous les mod\xe8les",increasingPrice:"prix croissant",decreasingPrice:"prix d\xe9croissant",latest:"les plus r\xe9cents",mostPopular:"les plus populaires",price:"prix",year:"ann\xe9e",ourOffers:"nos offres",learnMore:"VOIR D\xc9TAILS",mostPopularSedan:"Les berlines les plus populaires",wotoFooter:"Woto motors est un concessionnaire automobile bas\xe9 au Qu\xe9bec. Nous livrons les v\xe9hicules partout dans le monde. Pour plus de renseignements, connectez-vous sur votre compte woto et communiquer avec nos agents.",siteMap:"Plan du site",subscribe:"s'abonner",getLastUpdate:"Recevez les derni\xe8res mises \xe0 jour et offres",youVeBeenSubscribed:"Vous \xeates abonn\xe9. Merci de vous joindre \xe0 nous.",parameters:"param\xe8tres",homeContactText:"Connectez-vous sur votre compte woto et b\xe9n\xe9ficiez d'un service premium gratuitement. Nos agents seront ravis de vous accompagnez dans l'achat de votre prochaine voiture.",yourNextCarHere:"votre prochaine voiture est ici",serviceText:"O\xf9 que vous soyez, nous avons ce qu'il vous faut. Nous offrons 4 diff\xe9rents types de service en fonction du lieu de livraison. Nous donnons aussi la possibilit\xe9 \xe0 nos clients de pouvoir opter pour un service personnalis\xe9. Pour cela, nous invitons \xe0 entrer en contact avec l'un de nos agent.",purchase:"achat",vehicle_paper:"papier_du_v\xe9hicule",customs_clearance:"d\xe9douanement",insurance:"assurance",general:"g\xe9n\xe9ral",reference:"r\xe9f\xe9rence",brand:"marque",bodyType:"carrosserie",model:"mod\xe8le",kilometers:"kilom\xe8tres",YOR:"AMC",fuel:"carburant",gearBox:"bo\xeete de vitesse",serialNumber:"num\xe9ro de s\xe9rie",views:"vues",followers:"suivis par",overview:"g\xe9n\xe9ral",technical:"technique",features:"fonctionnalit\xe9s",interiorColor:"couleur int\xe9rieur",exteriorColor:"couleur ext\xe9rieur",motorSize:"Taille du moteur",numberOfCylinders:"Nombre de cylindres",maxSpeed:"vitesse maximum",numberGearRatios:"nombre de rapport de vitesse",similarVehicles:"v\xe9hicules similaires"},Object(j.a)(n,"mostPopular","les plus populaires"),Object(j.a)(n,"yearOfRelease","ann\xe9e de mise en circulation"),Object(j.a)(n,"engine","moteur"),Object(j.a)(n,"favorites","favoris"),Object(j.a)(n,"logout","se d\xe9connecter"),Object(j.a)(n,"startConversation","D\xe9marrer la discussion"),Object(j.a)(n,"openConversation","Ouvrir la discussion"),n),en:(r={home:"home",inventory:"inventory",services:"services",welcomeTo:"welcome to",availableCars:"available cars",seeMore:"see more",see:"see",needHelp:"need some help",password:"password",firstName:"first name",lastName:"last name",confirmPassword:"confirm password",signUp:"sign up",alreadyHaveAnAccount:"Already have an account",forgotPassword:"Forgot your password",notAMemberYet:"Not a member yet",login:"login",search:"search",allBodyTypes:"all body types",allBrands:"all brands",allModels:"all models",increasingPrice:"increasing price",decreasingPrice:"decreasing price",latest:"latest",mostPopular:"most popular",price:"price",year:"year",ourOffers:"our offers",learnMore:"LEARN MORE",mostPopularSedan:"The most popular sedan",wotoFooter:"Woto motors is a car dealership based in Quebec. We deliver vehicles all over the world. For more information, log into your woto account and communicate with our agents.",siteMap:"site map",subscribe:"subscribe",getLastUpdate:"Get latest updates and offers",youVeBeenSubscribed:"You've been subscribed. Thank you for joining us.",parameters:"parameters",homeContactText:"Log in to your woto account and enjoy a premium service for free. Our agents will be happy to assist you in the purchase of your next car.",yourNextCarHere:"your next car is here",serviceText:"Wherever you are, we have what you need. We offer 4 different types of service depending on the place of delivery. We also give our customers the possibility to choose a customized package. Therefore, we invite you to contact one of our agents.",purchase:"purchase",vehicle_paper:"vehicle_paper",customs_clearance:"customs_clearance",insurance:"insurance",general:"general",reference:"reference",brand:"brand",bodyType:"body type",model:"model",kilometers:"kilometers",YOR:"YOR",fuel:"fuel",gearBox:"gear box",serialNumber:"serial number",views:"views",followers:"followers",overview:"overview",technical:"technical",features:"features",interiorColor:"interior color",exteriorColor:"exterior color",motorSize:"motor size",numberOfCylinders:"number of cylinders",maxSpeed:"max speed",numberGearRatios:"number of gear ratios",similarVehicles:"similar vehicles"},Object(j.a)(r,"mostPopular","most popular"),Object(j.a)(r,"yearOfRelease","year of release"),Object(j.a)(r,"engine","engine"),Object(j.a)(r,"favorites","favorites"),Object(j.a)(r,"logout","logout"),Object(j.a)(r,"startConversation","Start conversation"),Object(j.a)(r,"openConversation","Open conversation"),r)},I=a(25),T=a.n(I),P=a(3),M=(a(133),a(134),a(78)),k=a.n(M),x=function(e){return o.a.createElement("svg",{viewBox:"0 0 16 16",onClick:e.onClick,className:"icon icon-".concat(e.icon," ").concat(e.size," ").concat(e.customClass),xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.a.createElement("use",{xlinkHref:"".concat(k.a,"#icon-").concat(e.icon)}))},H=(a(135),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={showList:!1},a.toggleList=function(){a.setState((function(e){return Object(P.a)({},e,{showList:!e.showList})}))},a.handleClick=function(e){a.target&&a.target.contains(e.target)||a.state.showList&&a.toggleList()},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"render",value:function(){var e=this,t=this.props.list,a=this.state.showList;return o.a.createElement("div",{className:"drop-down-list ".concat(a?"show":""),ref:function(t){return e.target=t},onClick:this.toggleList},o.a.createElement("div",{className:"drop-down-list__value"},this.props.value,o.a.createElement(x,{icon:"arrow_down"})),o.a.createElement("ul",{className:"drop-down-list__list"},t.map((function(t){return o.a.createElement("li",{className:"drop-down-list__list__item\n                                        ".concat(t.value&&e.props.value===t.value?"active":"","\n                                        ").concat(t.text&&e.props.value===t.text?"active":"","\n                                        ").concat(e.props.value===t?"active":""),key:t.text?t.text:t,onClick:function(){return e.props.selectItemHandler(t.value?t.value:t)}},t.text?t.text:t)}))))}}]),t}(s.Component)),D=Object(g.b)((function(e){return{lang:e.parameters.lang,currency:e.parameters.currency,price:e.product.price}}),(function(e){return{setLang:function(t){return e(f(t))},setCurrency:function(t){return e(E(t))},setPrice:function(t){return e({type:"SET_PRICE",data:t})}}}))(Object(h.f)((function(e){return o.a.createElement("div",{className:"navtop \n\n                        "},o.a.createElement("div",{className:"navtop__logo"},"WOTO"),o.a.createElement("div",{className:"navtop__contact"},o.a.createElement("div",{className:"navtop__contact__detail"},o.a.createElement(x,{icon:"phone"}),o.a.createElement("div",null,"+1 438 896 2026")),o.a.createElement("div",{className:"navtop__contact__detail"},o.a.createElement(x,{icon:"email"}),o.a.createElement("div",null,"wotto@gmail.com"))),o.a.createElement("div",{className:"navtop__cta"},o.a.createElement(H,{value:e.lang,list:["english","french"],selectItemHandler:function(t){var a=T.a.parse(e.location.search);a=Object(P.a)({},a,{lang:t});var n=T.a.stringify(a);e.history.push({pathname:e.history.pathname,search:"".concat(n)}),e.setLang(t)}}),o.a.createElement(H,{value:e.currency,list:["CAD","USD","EUR"],selectItemHandler:function(t){var a=T.a.parse(e.location.search);a=Object(P.a)({},a,{currency:t});var n=T.a.stringify(a);e.history.push({pathname:e.history.pathname,search:"".concat(n)}),e.setCurrency(t)}})))}))),q=(a(137),a(194)),L=Object(g.b)((function(e){return{isAuth:e.auth.auth,userName:e.auth.userName,lang:e.parameters.lang}}))(Object(h.f)((function(e){var t=e.userName,a=e.isAuth;return o.a.createElement("nav",{className:"navbarContainer \n                            ".concat(e.scrolled?"fixed":"","\n                            ")},o.a.createElement("ul",{className:"navbar__list"},o.a.createElement(i.c,{exact:!0,to:"/",className:"navbar__list__item"},o.a.createElement(q.a,{id:"home",defaultMessage:"home"})),o.a.createElement(i.b,{to:"../inventory",className:"navbar__list__item ".concat(e.location.pathname.includes("inventory")?"active":"")},o.a.createElement(q.a,{id:"inventory",defaultMessage:"inventory"})),o.a.createElement(i.b,{to:"../services",className:"navbar__list__item ".concat(e.location.pathname.includes("services")?"active":"")},o.a.createElement(q.a,{id:"services",defaultMessage:"services"}))),o.a.createElement("div",{className:"navbar__cta"},!a&&o.a.createElement(i.b,{className:"navbar__cta__login",to:"../auth"},o.a.createElement(x,{icon:"user"}),o.a.createElement("span",null,o.a.createElement(q.a,{id:"login",defaultMessage:"login"}))),a&&o.a.createElement("div",{className:"navbar__cta__avatar",onClick:function(){return e.history.push("/my-account/messages")}},o.a.createElement("span",null,t.split(" ")[0].slice(0,1),t.split(" ")[1].slice(0,1)))))}))),R=(a(138),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={showNavList:!1,showLogout:!1},a.toggleNavList=function(){a.setState((function(e){return Object(P.a)({},e,{showNavList:!e.showNavList})}))},a.toggleShowLogout=function(){a.setState((function(e){return Object(P.a)({},e,{showLogout:!e.showLogout})}))},a.setCurrency=function(e){a.props.history.push({pathname:a.props.history.pathname,search:"lang=".concat(a.props.lang,"&currency=").concat(e)}),a.props.setCurrency(e),a.toggleNavList()},a.setLang=function(e){a.props.history.push({pathname:a.props.history.pathname,search:"lang=".concat(e,"&currency=").concat(a.props.currency)}),a.props.setLang(e),a.toggleNavList()},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.showNavList,a=e.showLogout,n=this.props.userName,r=this.props.isAuth;return o.a.createElement("div",{className:"mobile-nav"},o.a.createElement("div",{className:"mobile-nav__group"},o.a.createElement("div",{className:"mobile-nav__toggler",onClick:this.toggleNavList},o.a.createElement("span",null),o.a.createElement("span",null),o.a.createElement("span",null)),o.a.createElement("div",{className:"mobile-nav__logo"},o.a.createElement(i.b,{to:"/inventory"},"WOTO"))),o.a.createElement("div",{className:"mobile-nav__group"},o.a.createElement(i.b,{to:"/my-account/messages"},o.a.createElement(x,{icon:"email"})),o.a.createElement(i.b,{to:"/my-account/favorites"},o.a.createElement(x,{icon:"heart"})),!r&&o.a.createElement(i.b,{className:"mobile-nav__login",to:"/auth"},"Login"),r&&window.innerWidth>738&&o.a.createElement(i.b,{className:"mobile-nav__avatar",to:"/my-account/messages"},o.a.createElement("span",null,n.split(" ")[0].slice(0,1),n.split(" ")[1].slice(0,1))),r&&window.innerWidth<=738&&o.a.createElement("div",{className:"mobile-nav__avatar",to:"/my-account/messages",onClick:this.toggleShowLogout},o.a.createElement("span",null,n.split(" ")[0].slice(0,1),n.split(" ")[1].slice(0,1)),o.a.createElement("div",{className:"mobile-nav__logout ".concat(a?"show":""),onClick:this.props.logoutHandler},"Logout"))),t&&o.a.createElement("div",{className:"mobile-nav__backdrop",onClick:this.toggleNavList}),o.a.createElement("div",{className:"mobile-nav__listContainer  ".concat(t?"show":"")},o.a.createElement("ul",{className:"mobile-nav__list"},o.a.createElement(i.c,{exact:!0,to:"/",className:"mobile-nav__list__item",onClick:this.toggleNavList},"Home"),o.a.createElement(i.c,{to:"/inventory",className:"mobile-nav__list__item",onClick:this.toggleNavList},"Inventory"),o.a.createElement(i.c,{to:"/services",className:"mobile-nav__list__item",onClick:this.toggleNavList},"Services")),o.a.createElement("div",{className:"mobile-nav__parameters"},o.a.createElement(H,{value:this.props.lang,list:["english","spanish","french"],selectItemHandler:this.setLang}),o.a.createElement(H,{value:this.props.currency,list:["CAD","USD","EUR"],selectItemHandler:this.setCurrency})),o.a.createElement("div",{className:"mobile-nav__list__socialMedia"},o.a.createElement(x,{icon:"facebook"}),o.a.createElement(x,{icon:"instagram"}),o.a.createElement(x,{icon:"twitter"}))))}}]),t}(s.Component)),A=Object(g.b)((function(e){return{isAuth:e.auth.auth,userName:e.auth.userName,lang:e.parameters.lang,currency:e.parameters.currency}}),(function(e){return{setLang:function(t){return e(f(t))},setCurrency:function(t){return e(E(t))}}}))(Object(h.f)(R)),F=(a(139),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={susbscribed:!1,subscribeInput:""},a.changeInputHandler=function(e){a.setState({subscribeInput:e})},a.subscribeHandler=function(){a.setState({susbscribed:!0,subscribeInput:""})},a.setCurrencyHandler=function(e){a.props.history.push({pathname:a.props.history.pathname,search:"lang=".concat(a.props.lang,"&currency=").concat(e)}),a.props.setCurrency(e),window.scrollTo(0,0)},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.susbscribed,n=t.subscribeInput,r=this.props.hide;return o.a.createElement("footer",{className:"footer ".concat(r?"hide":"")},o.a.createElement("ul",{className:"footer__list"},o.a.createElement("li",{className:"footer__list__group"},o.a.createElement("div",{className:"footer__list__item"},o.a.createElement("h3",{className:"footer__title"},"WOTO Motors"),o.a.createElement("p",null,o.a.createElement(q.a,{id:"wotoFooter",defaultMessage:"Woto motors is a car dealership based in Quebec. We deliver vehicles all over the world. For more information, log into your woto account and communicate with our agents."}))),o.a.createElement("div",{className:"footer__list__item"},o.a.createElement("h3",{className:"footer__title"},o.a.createElement(q.a,{id:"siteMap",defaultMessage:"site map"})),o.a.createElement("ul",{className:"footer__list__item__list"},o.a.createElement("li",{className:"footer__list__item__list__item"},o.a.createElement("a",{href:"/"},o.a.createElement(q.a,{id:"home",defaultMessage:"home"}))),o.a.createElement("li",{className:"footer__list__item__list__item"},o.a.createElement("a",{href:"/inventory"},o.a.createElement(q.a,{id:"inventory",defaultMessage:"inventory"}))),o.a.createElement("li",{className:"footer__list__item__list__item"},o.a.createElement("a",{href:"/services"},o.a.createElement(q.a,{id:"services",defaultMessage:"services"})))))),o.a.createElement("li",{className:"footer__list__group"},o.a.createElement("div",{className:"footer__list__item"},o.a.createElement("h3",{className:"footer__title"},o.a.createElement(q.a,{id:"subscribe",defaultMessage:"subscribe"})),o.a.createElement("div",{className:"footer__inputContainer"},o.a.createElement("input",{className:"footer__input",value:n,type:"email",placeholder:"email",onChange:function(t){return e.changeInputHandler(t.target.value)}}),o.a.createElement(x,{icon:"send",onClick:this.subscribeHandler})),a&&o.a.createElement("p",null,o.a.createElement(q.a,{id:"youVeBeenSubscribed",defaultMessage:"You've been subscribed. Thank you for joining us"})),!a&&o.a.createElement("p",null,o.a.createElement(q.a,{id:"getLastUpdate",defaultMessage:"Get latest updates and offers"}))),o.a.createElement("div",{className:"footer__list__item"},o.a.createElement("h3",{className:"footer__title"},o.a.createElement(q.a,{id:"parameters",defaultMessage:"parameters"})),o.a.createElement("ul",{className:"footer__list__item__list"},o.a.createElement("li",{className:"footer__list__item__list__item"},o.a.createElement(H,{value:this.props.lang,list:["english","spanish","french"],selectItemHandler:this.props.setLang})),o.a.createElement("li",{className:"footer__list__item__list__item"},o.a.createElement(H,{value:this.props.currency,list:["CAD","USD","EUR"],selectItemHandler:this.setCurrencyHandler})))))),o.a.createElement("div",{className:"footer__copyRight"},o.a.createElement("span",null,"\xa9 Anja Rasoloarivalona - 2019"),o.a.createElement("ul",{className:"footer__socialNetwork__list"},o.a.createElement(x,{icon:"facebook"}),o.a.createElement(x,{icon:"instagram"}),o.a.createElement(x,{icon:"twitter"}),o.a.createElement(x,{icon:"google-plus"}))))}}]),t}(s.Component)),U=Object(g.b)((function(e){return{lang:e.parameters.lang,currency:e.parameters.currency}}),(function(e){return{setLang:function(t){return e(f(t))},setCurrency:function(t){return e(E(t))}}}))(Object(h.f)(F)),B=a(14),V=(a(140),function(){var e,t=new Date,a=t.getDate();e=a<10?"0"+a:a;var n=t.getMonth()+1,r=t.getFullYear(),s=t.getHours(),o=t.getMinutes(),c=t.getSeconds();return"".concat(e,"-").concat(n,"-").concat(r," ").concat(s,":").concat(o,":").concat(c)}),z=a(80),W=a.n(z),Y=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.textarea.focus(),W()(this.textarea)}},{key:"render",value:function(){var e=this;return o.a.createElement("textarea",{style:{maxHeight:"9rem",minHeight:"4rem",resize:"none",padding:".7rem",boxSizing:"border-box",fontSize:"1.6rem"},ref:function(t){return e.textarea=t},placeholder:this.props.placeholder,rows:1,value:this.props.value,onChange:function(t){return e.props.onChange(t.target.value)},className:this.props.className})}}]),t}(s.Component),G=(a(141),function(e){var t,a,n=e.messages,r="",s=n[0].timeStamp,c=n[0].timeStamp.slice(0,5);return a=n[0].senderType,n.map((function(e,l,i){var u=i[l].timeStamp.slice(0,5);return 0===l?r=s:u!==c&&l+1<i.length?(r=n[l].timeStamp,c=n[l].timeStamp.slice(0,5)):r="",l+1<i.length&&i[l+1].senderType===a?t="small":(t="big",l+1<i.length&&(a=i[l+1].senderType)),o.a.createElement("div",{key:e._id,className:"messagesContainer__body__chatContainer"},""!==r&&o.a.createElement("div",{className:"messagesContainer__body__chat__convoDate"},r),o.a.createElement("div",{className:"messagesContainer__body__chat               \n                                ".concat("small"===t?"small-gap":"big-gap")},o.a.createElement("div",{className:"messagesContainer__body__chat__content \n                                    ".concat("user"===e.senderType?"user":"admin")},e.message)))}))}),J=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={messages:null,messageInput:"",showChat:!0,name:""},a.readNewMessagesHandler=function(){var e="http://localhost:8000/messages/"+a.props.userId,t=V();fetch(e,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({timeStamp:t,userName:a.state.name})}).then((function(e){if(200!==e.status)throw new Error("Failed to fetch messages");return e.json()})).then((function(e){console.log("resdata",e)})).catch((function(e){console.log(e)}))},a.sendMessageHandler=function(){if(""!==a.state.messageInput.trim()){var e=V(),t="http://localhost:8000/messages/user/"+a.props.userId;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:a.state.name,message:a.state.messageInput,timeStamp:e})}).then((function(e){return e.json()})).then((function(e){a.addMessages(e.data),a.setState({messageInput:""})})).catch((function(e){console.log(e)}))}else alert("Please enter a message")},a.addMessages=function(e){var t=[].concat(Object(B.a)(a.state.messages),[e]);a.setState({messages:t},(function(){return a.scrollToBottom()}))},a.messageChangeHandler=function(e){a.setState({messageInput:e})},a.toggleShowChat=function(){var e=0;a.state.messages&&a.state.messages.length>0&&a.state.messages.forEach((function(t){!1===t.read&&e++})),a.props.newMessage>0&&(e+=a.props.newMessage),e>0&&(a.readNewMessagesHandler(),a.props.resetNewMessageNotification()),a.setState((function(e){return{showChat:!e.showChat}}))},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t="http://localhost:8000/messages/"+this.props.userId;fetch(t,{headers:{"Content-Type":"application/json"},method:"GET"}).then((function(e){if(200!==e.status)throw new Error("Failed to fetch messages");return e.json()})).then((function(t){var a=t.messages.messages,n=0;a.forEach((function(e){!1===e.read&&n++})),n>0&&e.props.addNewMessageNotification(n),e.setState({messages:t.messages.messages,name:e.props.userName},(function(){return e.scrollToBottom()}))})).catch((function(e){console.log(e)})),N()("http://localhost:8000").on("adminSentMessage",(function(t){e.props.userId===t.messageData.userId&&(e.props.playNotificationSound(),e.addMessages(t.messageData),!0===e.state.showChat?e.readNewMessagesHandler():e.props.addNewMessageNotification(1))}))}},{key:"scrollToBottom",value:function(){this.messagesEnd.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.showChat,r=a.messageInput,c=a.messages;return e=c&&c.length>0?o.a.createElement(G,{messages:c}):o.a.createElement("div",{className:"messagesContainer__body__start"},o.a.createElement(q.a,{id:"startConversation",defaultMessage:"start conversation"})),o.a.createElement(s.Fragment,null,o.a.createElement("section",{className:"chat",onClick:this.toggleShowChat},o.a.createElement("div",{className:"chat__icon"},o.a.createElement(x,{icon:"messenger"})),!n&&this.props.newMessage>0&&o.a.createElement("div",{className:"chat__notif"},this.props.newMessage)),o.a.createElement("div",{className:"chat__messages ".concat(n?"show":"")},o.a.createElement("div",{className:"chat__messages__header"},o.a.createElement(x,{icon:"close",onClick:this.toggleShowChat}),o.a.createElement("span",null,o.a.createElement(q.a,{id:"openConversation",defaultMessage:"open conversation"}))),o.a.createElement("div",{className:"chat__messages__body"},e,o.a.createElement("div",{ref:function(e){return t.messagesEnd=e}})),o.a.createElement("div",{className:"chat__messages__input"},o.a.createElement(Y,{value:r,placeholder:"Write a message",onChange:this.messageChangeHandler}),o.a.createElement(x,{icon:"send",onClick:this.sendMessageHandler}))))}}]),t}(s.Component),K=Object(g.b)((function(e){return{userId:e.auth.userId,userName:e.auth.userName,newMessage:e.notification.newMessage}}),(function(e){return{addNewMessageNotification:function(t){return e(y(t))},resetNewMessageNotification:function(){return e({type:"RESET_NEW_MESSAGE_NOTIFICATION"})}}}))(J),Q=(a(142),function(){return o.a.createElement("div",{className:"loader-container"},o.a.createElement("div",{className:"loader"},o.a.createElement("div",{className:"loader__bar"}),o.a.createElement("div",{className:"loader__bar"}),o.a.createElement("div",{className:"loader__bar"}),o.a.createElement("div",{className:"loader__bar"}),o.a.createElement("div",{className:"loader__bar"}),o.a.createElement("div",{className:"loader__ball"})))}),X=(a(143),a(144),a(145),function(e){return e.link?o.a.createElement(i.b,{className:"button button--".concat(e.color,"  ").concat(e.customClass),to:e.link,onClick:e.onClick},e.children):o.a.createElement("button",{className:["button","button--".concat(e.color)].join(" "),onClick:e.onClick,disabled:e.disabled||e.loading,type:e.type},e.loading?"Looading...":e.children)}),$=(a(146),a(147),a(148),Object(g.b)((function(e){return{currency:e.parameters.currency,quotes:e.parameters.quotes}}))((function(e){var t=e.quotes.USDCAD,a=e.quotes.USDEUR,n=e.currency,r=e.amount;return"USD"===n&&(r/=t),"EUR"===n&&(r=r/t*a),o.a.createElement("div",{className:"amount"},o.a.createElement("span",{className:"amount__value"},Math.ceil(r).toLocaleString())," ",e.showCurrency?o.a.createElement("span",{className:"amount__currency"},n):"")}))),Z=function(e){return o.a.createElement("article",{className:"product"},e.children,o.a.createElement("div",{className:"product__imgContainer",onClick:e.requestProductDetails},o.a.createElement("div",{className:"product__imgContainer__hoverLayer"}),o.a.createElement("img",{src:e.mainImg,alt:"main img",className:"product__img"}),o.a.createElement(x,{icon:"search"})),o.a.createElement("div",{className:"product__details"},o.a.createElement("div",{className:"product__details__model"},o.a.createElement("span",null,e.title),o.a.createElement("span",null,e.year)),o.a.createElement("div",{className:"product__details__price"},o.a.createElement($,{amount:e.price,showCurrency:!0}))),o.a.createElement("ul",{className:"product__specList"},o.a.createElement("li",{className:"product__specList__item"},o.a.createElement("span",null,e.nbKilometers),o.a.createElement(x,{icon:"road"})),o.a.createElement("li",{className:"product__specList__item"},o.a.createElement("span",null,e.gazol),o.a.createElement(x,{icon:"gas-station"})),o.a.createElement("li",{className:"product__specList__item"},o.a.createElement("span",null,e.transmissionType),o.a.createElement(x,{icon:"gear"}))))},ee=Object(g.b)((function(e){return{currency:e.parameters.currency,lang:e.parameters.lang}}),(function(e){return{setProductRequestedData:function(t){return e(v(t))}}}))(Object(h.f)((function(e){var t=e.productsList;return o.a.createElement("ul",{className:"products-list"},t.map((function(t){return o.a.createElement("li",{key:t._id,className:"products-list__item"},o.a.createElement(Z,{id:t._id,mainImg:t.general.mainImgUrl,title:t.general.title,brand:t.general.brand,model:t.general.model,year:t.general.year,price:t.general.price,nbKilometers:t.general.nbKilometers,gazol:t.general.gazol,transmissionType:t.general.transmissionType,requestProductDetails:function(){return a=t,e.setProductRequestedData(a),e.history.push("/inventory/".concat(a._id,"?bodyType=").concat(a.general.bodyType,"&brand=").concat(a.general.brand,"&model=").concat(a.general.model,"&currency=").concat(e.currency,"&lang=").concat(e.lang,"&price=").concat(a.general.price)),void(e.fetchProductDetailsHandler&&e.fetchProductDetailsHandler(a));var a}}))})))}))),te=o.a.memo((function(e){var t=e.carsHomeInventory,a=e.homeInventoryLimit;return a<t.length&&(t=t.slice(0,a)),o.a.createElement("div",{className:"home-inventory"},o.a.createElement(ee,{productsList:t}),o.a.createElement(X,{color:"primary",onClick:function(){return e.history.push("/inventory")}},o.a.createElement(q.a,{id:"seeMore",defaultMessage:"see more"})))})),ae=(a(149),a(150),a(55)),ne=a.n(ae),re=(a(166),a(195)),se=a(40),oe=Object(re.defineMessages)({allBodyTypes:{id:"allBodyTypes",defaultMessage:"all body types"},allBrands:{id:"allBrands",defaultMessage:"all brands"},allModels:{id:"allModels",defaultMessage:"all models"},increasingPrice:{id:"increasingPrice",defaultMessage:"increasing price"},decreasingPrice:{id:"decreasingPrice",defaultMessage:"decreasing price"},latest:{id:"latest",defaultMessage:"latest"},mostPopular:{id:"mostPopular",defaultMessage:"most popular"}}),ce=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){var e=this,t=this.props.intl.formatMessage,a=this.props.query,n=this.props.bodyTypeList,r=this.props.brandAndModelsData,s=Object.keys(r),c=[];"all"!==a.bodyType&&(Object.keys(r).forEach((function(e){Object.keys(r[e]).includes(a.bodyType)&&c.push(e)})),s=c);var l=[];return"all"!==a.brand&&("all"===a.bodyType?Object.keys(r[a.brand]).forEach((function(e){l=[].concat(Object(B.a)(l),Object(B.a)(r[a.brand][e]))})):l=[].concat(Object(B.a)(l),Object(B.a)(r[a.brand][a.bodyType]))),o.a.createElement("div",{className:"inventory__controller"},o.a.createElement(H,{value:"all"===a.bodyType?t(oe.allBodyTypes):a.bodyType,list:[{text:t(oe.allBodyTypes),value:"all"}].concat(Object(B.a)(n)),selectItemHandler:this.props.selectBodyTypeHandler}),o.a.createElement(H,{value:"all"===a.brand?t(oe.allBrands):a.brand,list:[{text:t(oe.allBrands),value:"all"}].concat(Object(B.a)(s)),selectItemHandler:this.props.selectBrandHandler}),o.a.createElement(H,{value:"all"===a.model?t(oe.allModels):a.model,list:"all"!==a.brand?[{text:t(oe.allModels),value:"all"}].concat(Object(B.a)(l)):[{text:t(oe.allModels),value:"all"}],selectItemHandler:this.props.selectModelHandler}),a.sort&&o.a.createElement(H,{value:a.sort.split(" ").length>1?t(oe["".concat(a.sort.split(" ")[0]).concat(a.sort.split(" ")[1].slice(0,1).toUpperCase()).concat(a.sort.split(" ")[1].slice(1))]):t(oe[a.sort]),list:[{text:t(oe.increasingPrice),value:"increasing price"},{text:t(oe.decreasingPrice),value:"decreasing price"},{text:t(oe.latest),value:"latest"},{text:t(oe.mostPopular),value:"most popular"}],selectItemHandler:this.props.sortHandler}),o.a.createElement("div",{className:"inventory__controller__group"},o.a.createElement("div",{className:"inventory__controller__group__infos"},o.a.createElement("div",{className:"inventory__controller__group__infos__key"},o.a.createElement(q.a,{id:"price",defaultMessage:"price"})),o.a.createElement("div",{className:"inventory__controller__group__infos__value"},a.price.value.min," - ",a.price.value.max)),o.a.createElement(ne.a,{step:1e3,maxValue:a.price.scope.max,minValue:a.price.scope.min,value:a.price.value,onChange:function(t){return e.props.changePriceHandler(t)},onChangeComplete:this.props.changeComplete})),o.a.createElement("div",{className:"inventory__controller__group"},o.a.createElement("div",{className:"inventory__controller__group__infos"},o.a.createElement("div",{className:"inventory__controller__group__infos__key"},o.a.createElement(q.a,{id:"year",defaultMessage:"year"})),o.a.createElement("div",{className:"inventory__controller__group__infos__value"},a.year.value.min," - ",a.year.value.max)),o.a.createElement(ne.a,{maxValue:a.year.scope.max,minValue:a.year.scope.min,value:a.year.value,onChange:function(t){return e.props.changeYearHandler(t)},onChangeComplete:this.props.changeComplete})))}}]),t}(s.Component),le=Object(g.b)((function(e){return{brandAndModelsData:e.product.brandAndModelsData,price:e.product.price,bodyTypeList:e.product.bodyTypeList}}))(Object(se.c)(ce)),ie=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={query:{brand:"all",model:"all",bodyType:"all",year:{value:{min:2008,max:2020},scope:{min:2008,max:2020}},price:{value:{min:null,max:null},scope:{min:null,max:null}},sort:"increasing price"}},a.selectBodyTypeHandler=function(e){a.setState((function(t){return Object(P.a)({},t,{query:Object(P.a)({},t.query,{bodyType:e})})}))},a.selectBrandHandler=function(e){a.setState((function(t){return Object(P.a)({},t,{query:Object(P.a)({},t.query,{brand:e})})}))},a.selectModelHandler=function(e){a.setState((function(t){return Object(P.a)({},t,{query:Object(P.a)({},t.query,{model:e})})}))},a.changePriceHandler=function(e){a.setState((function(t){return Object(P.a)({},t,{query:Object(P.a)({},t.query,{price:Object(P.a)({},t.query.price,{value:e})})})}))},a.changeYearHandler=function(e){a.setState((function(t){return Object(P.a)({},t,{query:Object(P.a)({},t.query,{year:Object(P.a)({},t.query.year,{value:e})})})}))},a.onChangeComplete=function(){a.searchHandler()},a.searchHandler=function(){var e=a.state.query;a.props.history.push({pathname:"/inventory",search:"sort=".concat(e.sort,"&bodyType=").concat(e.bodyType,"&brand=").concat(e.brand,"&model=").concat(e.model,"&minPrice=").concat(e.price.value.min,"&maxPrice=").concat(e.price.value.max,"&minYear=").concat(e.year.value.min,"&maxYear=").concat(e.year.value.max)})},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.price.min,t=this.props.price.max;this.setState((function(a){return Object(P.a)({},a,{query:Object(P.a)({},a.query,{price:{value:{min:e,max:t},scope:{min:e,max:t}}})})}))}},{key:"render",value:function(){var e=this.state.query;return o.a.createElement("div",{className:"home-search"},o.a.createElement(le,{query:e,selectBrandHandler:this.selectBrandHandler,selectModelHandler:this.selectModelHandler,sortHandler:this.sortHandler,changePriceHandler:this.changePriceHandler,changeYearHandler:this.changeYearHandler,changeComplete:this.changeComplete,selectBodyTypeHandler:this.selectBodyTypeHandler,data:this.props.brandAndModelsData}),o.a.createElement("div",{className:"home-search__cta"},o.a.createElement(X,{color:"primary",onClick:this.searchHandler},o.a.createElement(q.a,{id:"search",defaultMessage:"search"}))))}}]),t}(s.Component),ue=Object(g.b)((function(e){return{brandAndModelsData:e.product.brandAndModelsData,price:e.product.price}}))(Object(h.f)(ie)),me=(a(167),Object(h.f)((function(e){return o.a.createElement("section",{className:"home-service"},o.a.createElement("h1",{className:"home-service__title"},o.a.createElement(q.a,{id:"ourOffers",defaultMessage:"our offers"})),o.a.createElement("ul",{className:"home-service__list"},o.a.createElement("li",{className:"home-service__list__item"},o.a.createElement(x,{icon:"buy"}),o.a.createElement("div",{className:"home-service__list__item__text"},o.a.createElement("h2",{className:"home-service__list__item__text__title"},"Basic"),o.a.createElement("p",{className:"home-service__list__item__text__para"},"Le Lorem Ipsum est simplement du faux texte employ\xe9 dans la composition et la mise en page avant impression."))),o.a.createElement("li",{className:"home-service__list__item"},o.a.createElement(x,{icon:"contract"}),o.a.createElement("div",{className:"home-service__list__item__text"},o.a.createElement("h2",{className:"home-service__list__item__text__title"},"Conventionnel"),o.a.createElement("p",{className:"home-service__list__item__text__para"},"Le Lorem Ipsum est simplement du faux texte employ\xe9 dans la composition et la mise en page avant impression."))),o.a.createElement("li",{className:"home-service__list__item"},o.a.createElement(x,{icon:"yoga"}),o.a.createElement("div",{className:"home-service__list__item__text"},o.a.createElement("h2",{className:"home-service__list__item__text__title"},"Tranquility"),o.a.createElement("p",{className:"home-service__list__item__text__para"},"Le Lorem Ipsum est simplement du faux texte employ\xe9 dans la composition et la mise en page avant impression."))),o.a.createElement("li",{className:"home-service__list__item"},o.a.createElement(x,{icon:"key"}),o.a.createElement("div",{className:"home-service__list__item__text"},o.a.createElement("h2",{className:"home-service__list__item__text__title"},"Cl\xe9s en main"),o.a.createElement("p",{className:"home-service__list__item__text__para"},"Le Lorem Ipsum est simplement du faux texte employ\xe9 dans la composition et la mise en page avant impression.")))),o.a.createElement(X,{color:"primary",onClick:function(){return e.history.push("/services")}},o.a.createElement(q.a,{id:"learnMore",defaultMessage:"LEARN MORE"})))}))),de=(a(168),a(169),function(e){return o.a.createElement("div",{className:"input ".concat(e.className)},"input"===e.control&&o.a.createElement("input",{className:"input__field",type:e.type,id:e.id,required:e.required,value:e.value,placeholder:e.placeholder,autoComplete:e.autoComplete,onChange:function(t){return e.onChange(e.id,t.target.value,e.formType)}}),"textarea"===e.control&&o.a.createElement("textarea",{className:"textarea",id:e.id,required:e.required,value:e.value,onChange:function(t){return e.onChange(e.id,t.target.value)},placeholder:e.placeholder}),"select"===e.control&&o.a.createElement("select",{id:e.id,required:e.required,onChange:function(t){return e.onChange(e.id,t.target.value)},value:e.value},e.options.map((function(e){return o.a.createElement("option",{key:e,value:e},e)}))),e.label&&o.a.createElement("label",{htmlFor:e.id,className:"input__label"},e.label),e.border&&o.a.createElement("div",{className:"input__border"}))}),_e=(a(170),function(e,t,a,n,r){var s=[];return[e,t,a,n,r].forEach((function(e){e&&e.value.length<1&&s.push("".concat(e.errorLabel," is required"))})),/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e.value.trim())||s.push("Please, enter a valid email"),n&&n.value.trim().length<3&&s.push("Firstname should be at least 3 characters long"),r&&r.value.trim().length<3&&s.push("Lastname should be at least 3 characters long"),t.value.trim().length<5&&s.push("Password should be at least 5 characters long"),a&&t.value.trim()!==a.value.trim()&&s.push("Please enter the same password"),s}),pe=(a(171),function(e){return l.a.createPortal(o.a.createElement("div",{className:["backdrop",e.open?"open":""].join(" "),onClick:e.onClick},e.children),document.getElementById("backdrop-root"))}),he=(a(172),function(e){return o.a.createElement("section",{className:"modal"},o.a.createElement("header",{className:"modal__header"},o.a.createElement("h1",null,e.title)),o.a.createElement("div",{className:"modal__body"},e.children),o.a.createElement("div",{className:"modal__cta"},o.a.createElement(X,{onClick:e.onCloseModal,color:"primary"},"OK")))}),ge=function(e){return o.a.createElement(s.Fragment,null,e.error&&o.a.createElement(pe,{onClick:e.onCloseError}),e.error&&o.a.createElement(he,{title:"Oops something went wrong",onCloseModal:e.onCloseError},o.a.createElement("p",null,e.error[0])))},ve=Object(re.defineMessages)({password:{id:"password",defaultMessage:"password"}}),fe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={loginForm:{email:{value:""},password:{value:""}},error:null},a.inputChangeHandler=function(e,t){a.setState((function(a){return{loginForm:Object(P.a)({},a.loginForm,Object(j.a)({},e,Object(P.a)({},a.loginForm[e],{value:t})))}}))},a.loginHandler=function(e,t){if(e.preventDefault(),a.props.setLoadingToTrue(),t){var n=_e(t.email,t.password);if(n.length>0)return a.setState({error:n}),a.props.setLoadingToFalse(),void a.props.setErrors()}var r=V();fetch("https://africauto.herokuapp.com/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email.value,password:t.password.value,timeStamp:r})}).then((function(e){if(422===e.status)throw new Error("validation failed");if(401===e.status)throw new Error("Wrong email or password");if(200!==e.status&&201!==e.status)throw new Error("Could not authenticate you");return e.json()})).then((function(e){N()("https://africauto.herokuapp.com",{query:"data=".concat(e.userId," ").concat(e.connectionId)}).connect(),a.props.loginSucceeded(e),localStorage.setItem("woto-token",e.token),localStorage.setItem("woto-userId",e.userId),localStorage.setItem("woto-userName",e.userName);var t=new Date((new Date).getTime()+864e5);localStorage.setItem("woto-expiryDate",t.toISOString()),a.props.setLoadingToFalse(),a.props.history.push("/my-account/messages")})).catch((function(e){var t=[];t.push(e.message),a.setState({error:t}),a.props.loginFailed(),a.props.setLoadingToFalse(),a.props.setErrors()}))},a.closeErrorHandler=function(){a.setState({error:null}),a.props.resetErrors()},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.intl.formatMessage;return this.state.error?o.a.createElement(ge,{error:this.state.error,onCloseError:this.closeErrorHandler}):o.a.createElement("form",{className:"auth__form auth__form--login",onSubmit:function(t){return e.loginHandler(t,e.state.loginForm)},noValidate:!0,autoComplete:"off"},o.a.createElement("ul",{className:"auth__input__list"},o.a.createElement(de,{type:"email",control:"input",label:"email",id:"email",value:this.state.loginForm.email.value,onChange:this.inputChangeHandler,placeholder:"email",border:!0,required:!0,autoComplete:"new-password"}),o.a.createElement(de,{type:"password",control:"input",label:"mot de passe",id:"password",value:this.state.loginForm.password.value,onChange:this.inputChangeHandler,placeholder:t(ve.password),border:!0,required:!0,autoComplete:"new-password"})),o.a.createElement("div",{className:"login__options"},o.a.createElement("div",{className:"login__options--1"},o.a.createElement(q.a,{id:"forgotPassword",defaultMessage:"Forgot your password"})),o.a.createElement("div",{className:"login__options--1"},o.a.createElement(q.a,{id:"notAMemberYet",defaultMessage:"Not a member yet"})," ?")),o.a.createElement("div",{className:"auth__button"},o.a.createElement(X,{color:"primary",type:"submit"},o.a.createElement(q.a,{id:"login",defaultMessage:"login"}))))}}]),t}(s.Component),Ee=Object(g.b)(null,(function(e){return{loginSucceeded:function(t){return e(function(e){return{type:"LOGIN_SUCCEDED",token:e.token,userId:e.userId,connectionId:e.connectionId,userName:e.userName}}(t))},loginFailed:function(){return e({type:"LOGIN_FAILED"})}}}))(Object(h.f)(Object(se.c)(fe))),ye=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={loginForm:{email:{value:""},password:{value:""}},error:null},a.inputChangeHandler=function(e,t){a.setState((function(a){return{loginForm:Object(P.a)({},a.loginForm,Object(j.a)({},e,Object(P.a)({},a.loginForm[e],{value:t})))}}))},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"home-contact"},o.a.createElement("h1",{className:"home-contact__title"},o.a.createElement(q.a,{id:"needHelp",defaultMessage:"Need soome help"})),o.a.createElement("p",{className:"home-contact__text"},o.a.createElement(q.a,{id:"homeContactText",defaultMessage:"Log in to your woto account and enjoy a premium service for free. Our agents will be happy to assist you in the purchase of your next car."})),o.a.createElement("div",{className:"home-contact__form"},o.a.createElement(Ee,null)))}}]),t}(s.Component),be=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={carsHomeIntro:a.props.carsHomeIntro,index:0,initialIndex:0,showIntroList:!1,partRequested:"inventory",homeInventoryLimit:9},a.imageSlideHandler=function(){var e=a.state,t=e.index,n=e.carsHomeIntro;a.inter=setInterval((function(){t===n.length?a.setState({index:0},(function(){clearInterval(a.inter),a.imageSlideHandler()})):a.setState({index:t++})}),3e3)},a.onRequestChange=function(e){clearInterval(a.inter),a.setState({index:e},(function(){return a.imageSlideHandler()}))},a.clearInterval=function(){clearInterval(a.inter)},a.replayInterval=function(){a.imageSlideHandler()},a.showIntroListToggler=function(){a.setState((function(e){return{showIntroList:!e.showIntroList}}))},a.requestProductDetails=function(e){a.props.setProductRequestedData(e),a.props.history.push("/inventory/".concat(e._id,"?bodyType=").concat(e.general.bodyType,"&brand=").concat(e.general.brand,"&currency=").concat(a.props.currency,"&lang=").concat(a.props.lang,"&model=").concat(e.general.model,"&price=").concat(e.general.price)),a.props.fetchProductDetailsHandler&&a.props.fetchProductDetailsHandler(e)},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){window.innerWidth>1337&&this.setState({homeInventoryLimit:8}),this.imageSlideHandler()}},{key:"componentWillUnmount",value:function(){this.clearInterval(this.inter)}},{key:"render",value:function(){var e=this,t=this.state.carsHomeIntro;return o.a.createElement("div",{className:"home"},o.a.createElement("section",{className:"home__intro"},t.map((function(t,a){return o.a.createElement("div",{className:"home__intro__background \n                                        ".concat(e.state.index===a?"active":"","\n                                        ").concat(0===a?"keyframe":""),key:a},o.a.createElement("img",{src:t.general.mainImgUrl,className:"home__intro__background__image",alt:"home intro"}),o.a.createElement("div",{className:"home__intro__product-container",onMouseEnter:e.clearInterval,onMouseLeave:e.replayInterval},o.a.createElement("div",{className:"home__intro__product"},o.a.createElement("div",{className:"home__intro__product__detail"},o.a.createElement("span",null,t.general.brand),o.a.createElement("span",null,t.general.model),o.a.createElement("span",null,t.general.year)),o.a.createElement("div",{className:"home__intro__product__price"},o.a.createElement($,{amount:t.general.price,showCurrency:!0}))),o.a.createElement(X,{color:"primary",onClick:function(){return e.requestProductDetails(t)}},o.a.createElement(q.a,{id:"see",defaultMessage:"see"}))))}))),o.a.createElement("section",{className:"home__router"},o.a.createElement("div",{className:"home__router__nav"},o.a.createElement("h1",null,o.a.createElement("span",null,o.a.createElement(q.a,{id:"welcomeTo",defaultMessage:"welcome to"}),"\xa0"),o.a.createElement("span",null,"WOTO MOTORS")),o.a.createElement("nav",{className:"home__router__nav__list"},o.a.createElement("li",{className:"home__router__nav__list__item ".concat("inventory"===this.state.partRequested?"active":""),onClick:function(){return e.setState({partRequested:"inventory"})}},o.a.createElement(q.a,{id:"inventory",defaultMessage:"inventory"})),o.a.createElement("li",{className:"home__router__nav__list__item ".concat("search"===this.state.partRequested?"active":""),onClick:function(){return e.setState({partRequested:"search"})}},o.a.createElement(q.a,{id:"search",defaultMessage:"search"})),o.a.createElement("li",{className:"home__router__nav__list__item ".concat("services"===this.state.partRequested?"active":""),onClick:function(){return e.setState({partRequested:"services"})}},o.a.createElement(q.a,{id:"services",defaultMessage:"services"}))),o.a.createElement("div",{className:"home__router__nav__count"},o.a.createElement(x,{icon:"car"}),o.a.createElement("div",null,this.props.totalProductsCounter," ",o.a.createElement(q.a,{id:"availableCars",defaultMessage:"available cars"}))))),"inventory"===this.state.partRequested&&o.a.createElement(te,{carsHomeInventory:this.props.carsHomeInventory,history:this.props.history,homeInventoryLimit:this.state.homeInventoryLimit}),"search"===this.state.partRequested&&o.a.createElement(ue,null),"services"===this.state.partRequested&&o.a.createElement(me,null),o.a.createElement(ye,null),o.a.createElement("div",{className:"home__mostPopSedan"},o.a.createElement("h1",{className:"home__mostPopSedan__title"},o.a.createElement(q.a,{id:"mostPopularSedan",defaultMessage:"The most popular sedan"})),o.a.createElement(ee,{productsList:this.props.mostPopularSedan})))}}]),t}(s.Component),Ne=Object(g.b)((function(e){return{mostPopularSedan:e.product.mostPopularSedan,lang:e.parameters.lang,currency:e.parameters.currency,totalProductsCounter:e.product.totalProductsCounter}}),(function(e){return{setProductRequestedData:function(t){return e(v(t))}}}))(be),we=(a(173),a(174),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){for(var e=this,t=[],a=1;a<=this.props.lastPage;a++)t.push(a);var n=t.map((function(t){return o.a.createElement("div",{onClick:e.props.onRequestPageNumber.bind(e,t),key:t,id:t,className:["paginator__control",e.props.currentPage===t?"active":" "].join(" ")},t)}));return o.a.createElement("div",{className:"paginator"},this.props.children,this.props.products&&this.props.products.length>0&&o.a.createElement("div",{className:"paginator__controls ".concat(1===this.props.currentPage&&this.props.products.length<this.props.itemsPerPage?"hide":" ")},o.a.createElement("div",{className:"paginator__control\n                                    ".concat(1===this.props.currentPage?"disabled":""),onClick:this.props.onRequestPreviousPage},o.a.createElement(x,{icon:"arrow-left"})),n,o.a.createElement("div",{className:"paginator__control\n                                    ".concat(this.props.currentPage===this.props.lastPage?"disabled":""),onClick:this.props.onRequestNextPage},o.a.createElement(x,{icon:"arrow-right"}))))}}]),t}(s.Component)),Oe=function(e,t,a,n){var r,s=n.USDCAD,o=n.USDEUR;return"CAD"===t&&("USD"===a&&(r=e/s),"EUR"===a&&(r=e/s*o),"CAD"===a&&(r=e)),"USD"===t&&("CAD"===a&&(r=e*s),"EUR"===a&&(r=e*o)),"EUR"===t&&("USD"===a&&(r=e/o),"CAD"===a&&(r=e/o*s)),r},Ce=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={products:null,loading:!0,query:{brand:"all",model:"all",bodyType:"all",page:1,year:{value:{min:2008,max:2020},scope:{min:2008,max:2020}},price:{value:{min:null,max:null},scope:{min:null,max:null},init:{min:null,max:null}},sort:"increasing price"},lastPage:null},a.fetchProductsHandler=function(){var e,t=a.state.query,n=new URL("https://africauto.herokuapp.com/product/client"),r=t.price.value.min,s=t.price.value.max,o=r,c=s;r=Oe(t.price.fullValue.min,a.props.currency,"CAD",a.props.quotes),s=Oe(t.price.fullValue.max,a.props.currency,"CAD",a.props.quotes),t&&(e=Object(P.a)({},e,{page:t.page,brand:t.brand,bodyType:t.bodyType,model:t.model,minPrice:Math.floor(r),maxPrice:Math.ceil(s),minYear:t.year.value.min,maxYear:t.year.value.max,sort:t.sort.split(" ").length>0?"".concat(t.sort.split(" ")[0],"_").concat(t.sort.split(" ")[1]):t.sort}),n.search=new URLSearchParams(e).toString()),fetch(n,{headers:{"Content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Error fetching products");return e.json()})).then((function(e){a.setState({products:e.products,loading:!1}),a.props.history.push({pathname:"/inventory",search:"bodyType=".concat(t.bodyType,"&brand=").concat(t.brand,"&currency=").concat(a.props.currency,"&lang=").concat(a.props.lang,"&maxPrice=").concat(c,"&maxYear=").concat(t.year.value.max,"&minPrice=").concat(o,"&minYear=").concat(t.year.value.min,"&model=").concat(t.model,"&page=").concat(t.page,"&sort=").concat(t.sort)})})).catch((function(e){console.log(e)}))},a.selectBodyTypeHandler=function(e){var t,n=a.props.brandAndModelsData,r=a.state.query;t="all"!==r.brand?Object.keys(n[r.brand]).includes(e)?Object(P.a)({},a.state.query,{bodyType:e}):Object(P.a)({},a.state.query,{bodyType:e,brand:"all",model:"all",page:1}):Object(P.a)({},a.state.query,{bodyType:e}),a.setState({query:t},(function(){return a.fetchProductsHandler(t)}))},a.selectBrandHandler=function(e){var t=Object(P.a)({},a.state.query,{brand:e});"all"===e&&(t=Object(P.a)({},t,{model:"all",page:1})),a.setState({query:t},(function(){return a.fetchProductsHandler(t)}))},a.selectModelHandler=function(e){a.setState((function(t){return Object(P.a)({},t,{query:Object(P.a)({},t.query,{model:e})})}),(function(){return a.fetchProductsHandler()}))},a.sortHandler=function(e){a.setState((function(t){return Object(P.a)({},t,{query:Object(P.a)({},t.query,{sort:e,page:1})})}),(function(){return a.fetchProductsHandler()}))},a.changePriceHandler=function(e){a.setState((function(t){return Object(P.a)({},t,{query:Object(P.a)({},t.query,{page:1,price:Object(P.a)({},t.query.price,{value:e,fullValue:e})})})}))},a.changeYearHandler=function(e){a.setState((function(t){return Object(P.a)({},t,{query:Object(P.a)({},t.query,{page:1,year:Object(P.a)({},t.query.year,{value:e})})})}))},a.changeComplete=function(){a.fetchProductsHandler()},a.paginationHandler=function(e){var t=a.state.query;"next"===e&&a.props.currentInventoryPage<a.state.lastPage&&(t=Object(P.a)({},t,{page:a.props.currentInventoryPage+1}),a.props.setInventoryCurrentPage(a.props.currentInventoryPage+1),a.setState({query:t},(function(){return a.fetchProductsHandler()}))),"previous"===e&&a.props.currentInventoryPage>1&&(t=Object(P.a)({},t,{page:a.props.currentInventoryPage-1}),a.props.setInventoryCurrentPage(a.props.currentInventoryPage-1),a.setState({query:t},(function(){return a.fetchProductsHandler()}))),"previous"!==e&&"next"!==e&&(t=Object(P.a)({},t,{page:e}),a.props.setInventoryCurrentPage(e),a.setState({query:t},(function(){return a.fetchProductsHandler()})))},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.price.min,a=this.props.price.max,n=T.a.parse(this.props.location.search);Object.keys(n).length>2?this.setState((function(r){return Object(P.a)({},r,{query:Object(P.a)({},r.query,{price:{init:{min:t,max:a},scope:{min:t,max:a},value:{min:parseInt(n.minPrice),max:parseInt(n.maxPrice)},fullValue:{min:parseInt(n.minPrice),max:parseInt(n.maxPrice)}},year:Object(P.a)({},r.query.year,{value:{min:parseInt(n.minYear),max:parseInt(n.maxYear)}}),brand:n.brand,model:n.model,sort:n.sort,bodyType:n.bodyType,page:n.page}),lastPage:Math.ceil(e.props.totalProductsCounter/e.props.itemsPerPage)})}),(function(){return e.fetchProductsHandler()})):this.setState((function(n){return Object(P.a)({},n,{query:Object(P.a)({},n.query,{price:{init:{min:t,max:a},scope:{min:t,max:a},value:{min:t,max:a},fullValue:{min:t,max:a}}}),lastPage:Math.ceil(e.props.totalProductsCounter/e.props.itemsPerPage)})}),(function(){return e.fetchProductsHandler()}))}},{key:"componentDidUpdate",value:function(e){var t=this,a=e.currency,n=this.props.currency,r=this.state.query;if(a!==n){var s=this.props.quotes;this.setState((function(e){return Object(P.a)({},e,{query:Object(P.a)({},e.query,{price:Object(P.a)({},e.query.price,{scope:{min:1e3*Math.floor(Oe(r.price.init.min,"CAD",n,s)/1e3),max:1e3*Math.ceil(Oe(r.price.init.max,"CAD",n,s)/1e3)},value:{min:1e3*Math.floor(Oe(r.price.init.min,"CAD",n,s)/1e3),max:1e3*Math.ceil(Oe(r.price.init.max,"CAD",n,s)/1e3)},fullValue:{min:Oe(r.price.init.min,"CAD",n,s),max:Oe(r.price.init.max,"CAD",n,s)}})})})}),(function(){return t.fetchProductsHandler()}))}}},{key:"render",value:function(){var e=this.state,t=e.products,a=e.loading,n=e.query,r=o.a.createElement(Q,null);return a||(r=o.a.createElement("div",{className:"inventory"},o.a.createElement(le,{currency:this.props.currency,query:n,selectBrandHandler:this.selectBrandHandler,selectModelHandler:this.selectModelHandler,selectBodyTypeHandler:this.selectBodyTypeHandler,sortHandler:this.sortHandler,changePriceHandler:this.changePriceHandler,changeYearHandler:this.changeYearHandler,changeComplete:this.changeComplete,data:this.props.brandAndModelsData}),o.a.createElement("section",{className:"inventory__container"},t&&o.a.createElement(we,{onRequestPreviousPage:this.paginationHandler.bind(this,"previous"),onRequestNextPage:this.paginationHandler.bind(this,"next"),lastPage:Math.ceil(this.props.totalProductsCounter/this.props.itemsPerPage),currentPage:this.props.currentInventoryPage,onRequestPageNumber:this.paginationHandler,products:t,itemsPerPage:this.props.itemsPerPage},o.a.createElement(ee,{productsList:t}))))),r}}]),t}(s.Component),je=Object(g.b)((function(e){return{brandAndModelsData:e.product.brandAndModelsData,price:e.product.price,totalProductsCounter:e.product.totalProductsCounter,currentInventoryPage:e.product.currentInventoryPage,itemsPerPage:e.product.itemsPerPage,currency:e.parameters.currency,quotes:e.parameters.quotes,lang:e.parameters.lang}}),(function(e){return{setInventoryCurrentPage:function(t){return e({type:"SET_INVENTORY_CURRENT_PAGE",currentPage:t})}}}))(Ce),Se=a(23),Ie=(a(175),a(196)),Te=(a(176),function(e){var t=e.product;return o.a.createElement("div",{className:"overview"},o.a.createElement("section",{className:"overview__section"},o.a.createElement("div",{className:"overview__title"},o.a.createElement(x,{icon:"file"}),o.a.createElement("div",null,o.a.createElement(q.a,{id:"general",defaultMessage:"general"}))),o.a.createElement("ul",{className:"overview__list"},o.a.createElement("li",{className:"overview__list__item"},o.a.createElement("div",{className:"overview__list__item__key"},o.a.createElement(q.a,{id:"brand",defaultMessage:"brand"})),o.a.createElement("div",{className:"overview__list__item__value"},t.general.brand)),o.a.createElement("li",{className:"overview__list__item"},o.a.createElement("div",{className:"overview__list__item__key"},o.a.createElement(q.a,{id:"model",defaultMessage:"model"})),o.a.createElement("div",{className:"overview__list__item__value"},t.general.model)),o.a.createElement("li",{className:"overview__list__item"},o.a.createElement("div",{className:"overview__list__item__key"},o.a.createElement(q.a,{id:"body type",defaultMessage:"body type"})),o.a.createElement("div",{className:"overview__list__item__value"},t.general.bodyType)),o.a.createElement("li",{className:"overview__list__item"},o.a.createElement("div",{className:"overview__list__item__key"},o.a.createElement(q.a,{id:"year",defaultMessage:"year"})),o.a.createElement("div",{className:"overview__list__item__value"},t.general.year)),o.a.createElement("li",{className:"overview__list__item"},o.a.createElement("div",{className:"overview__list__item__key"},o.a.createElement(q.a,{id:"kilometers",defaultMessage:"kilometers"})),o.a.createElement("div",{className:"overview__list__item__value"},t.general.nbKilometers.toLocaleString()," km")),o.a.createElement("li",{className:"overview__list__item"},o.a.createElement("div",{className:"overview__list__item__key"},o.a.createElement(q.a,{id:"yearOfRelease",defaultMessage:"year of release"})),o.a.createElement("div",{className:"overview__list__item__value"},t.general.yearOfRelease)),o.a.createElement("li",{className:"overview__list__item"},o.a.createElement("div",{className:"overview__list__item__key"},o.a.createElement(q.a,{id:"serialNumber",defaultMessage:"serial number"})),o.a.createElement("div",{className:"overview__list__item__value"},t.general.serialNumber)))),o.a.createElement("section",{className:"overview__section"},o.a.createElement("div",{className:"overview__title"},o.a.createElement(x,{icon:"design"}),o.a.createElement("div",null,"Design")),o.a.createElement("ul",{className:"overview__list"},o.a.createElement("li",{className:"overview__list__item"},o.a.createElement("div",{className:"overview__list__item__key"},o.a.createElement(q.a,{id:"interiorColor",defaultMessage:"interior color"})),o.a.createElement("div",{className:"overview__list__item__value"},t.design.intColor)),o.a.createElement("li",{className:"overview__list__item"},o.a.createElement("div",{className:"overview__list__item__key"},o.a.createElement(q.a,{id:"exteriorColor",defaultMessage:"exterior color"})),o.a.createElement("div",{className:"overview__list__item__value"},t.design.extColor)))))}),Pe=(a(177),function(e){var t=e.product;return o.a.createElement("div",{className:"technical"},o.a.createElement("div",{className:"technical__section"},o.a.createElement("div",{className:"technical__title"},o.a.createElement(x,{icon:"engine"}),o.a.createElement("div",null,o.a.createElement(q.a,{id:"engine",defaultMessage:"engine"}))),o.a.createElement("ul",{className:"technical__section__list"},o.a.createElement("li",{className:"technical__section__list__item"},o.a.createElement("span",{className:"technical__section__list__item__detail"},o.a.createElement(q.a,{id:"motorSize",defaultMessage:"motor size"})),o.a.createElement("span",{className:"technical__section__list__item__value"},t.tech.motorSize)),o.a.createElement("li",{className:"technical__section__list__item"},o.a.createElement("span",{className:"technical__section__list__item__detail"},o.a.createElement(q.a,{id:"numberOfCylinders",defaultMessage:"number of cylinders"})),o.a.createElement("span",{className:"technical__section__list__item__value"},t.tech.nbCylinders)),o.a.createElement("li",{className:"technical__section__list__item"},o.a.createElement("span",{className:"technical__section__list__item__detail"},o.a.createElement(q.a,{id:"fuel",defaultMessage:"fuel"})),o.a.createElement("span",{className:"technical__section__list__item__value"},t.general.gazol)),o.a.createElement("li",{className:"technical__section__list__item"},o.a.createElement("span",{className:"technical__section__list__item__detail"},o.a.createElement(q.a,{id:"maxSpeed",defaultMessage:"max speed"})),o.a.createElement("span",{className:"technical__section__list__item__value"},t.tech.maxSpeed," km/h")))),o.a.createElement("div",{className:"technical__section"},o.a.createElement("div",{className:"technical__title"},o.a.createElement(x,{icon:"gear"}),o.a.createElement("div",null,"Transmission")),o.a.createElement("ul",{className:"technical__section__list"},o.a.createElement("li",{className:"technical__section__list__item"},o.a.createElement("span",{className:"technical__section__list__item__detail"},o.a.createElement(q.a,{id:"gearBox",defaultMessage:"gear box"})),o.a.createElement("span",{className:"technical__section__list__item__value"},t.general.transmissionType)),o.a.createElement("li",{className:"technical__section__list__item"},o.a.createElement("span",{className:"technical__section__list__item__detail"},o.a.createElement(q.a,{id:"numberGearRatios",defaultMessage:"number of gear ratios"})),o.a.createElement("span",{className:"technical__section__list__item__value"},t.tech.nbGearRatios)))))}),Me=(a(178),function(e){var t=e.product;return o.a.createElement("div",{className:"features"},o.a.createElement("ul",{className:"features__list"},t.features.map((function(e){return o.a.createElement("li",{className:"features__list__item"},o.a.createElement(x,{icon:"arrow-list"}),e)}))))}),ke=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(_.a)(t).call(this,e))).imageSlideHandler=function(){var e=a.state,t=e.index,n=e.images,r=e.initiatlIndex;a.inter=setInterval((function(){t===n.length?a.setState({index:r},(function(){clearInterval(a.inter),a.imageSlideHandler()})):a.setState({index:t++})}),2500)},a.changeGalleryImgIndex=function(e){var t=a.state.product.imageUrls.indexOf("".concat(e));a.setState({index:t})},a.fetchProductDetailsHandler=function(e){var t,n,r,s,o,c,l=a.props,i=l.productRequested,u=l.userId;if(t=null===u?"not connected":u,i)n=i.general.brand,r=i.general.model,s=i.general.price,c=i.general.bodyType,o=i._id;else{var m=a.props.location.search,d=new URLSearchParams(m);n=d.get("brand"),r=d.get("model"),s=d.get("price"),c=d.get("bodyType"),o=a.props.match.params.prodId}e&&(o=e._id,n=e.general.brand,r=e.general.model,s=e.general.price,c=e.general.bodyType);var _="https://africauto.herokuapp.com/product/".concat(o,"?userId=").concat(t,"&brand=").concat(n,"&model=").concat(r,"&bodyType=").concat(c,"&price=").concat(s);fetch(_,{headers:{"Content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Error fetching products");return e.json()})).then((function(e){var t,n=e.product,r=a.props.userFavorites,s=[];r.forEach((function(e){return s.push(e._id)})),t=!!s.includes(n._id),window.scrollTo(0,0),a.setState({product:e.product,relatedProducts:e.relatedProducts,favorite:t,loading:!1})})).catch((function(e){console.log(e)}))},a.favoriteHandler=function(){var e,t,n=a.props.productId;e=n||a.props.match.params.prodId,a.state.favorite?(t="https://africauto.herokuapp.com/user/remove-favorite/"+a.props.userId+"?prodId=".concat(e),a.props.removeUserFavoriteProduct(a.state.product)):(t="https://africauto.herokuapp.com/user/add-favorite/"+a.props.userId+"?prodId=".concat(e),a.props.addUserFavoriteProduct(a.state.product));fetch(t,{headers:{"Content-type":"application/json"},method:"POST"}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Error handling favorites product");return e.json()})).then((function(e){a.setState((function(e){return Object(P.a)({},e,{favorite:!e.favorite})}))})).catch((function(e){console.log(e)}))},a.requestProductDetails=function(e){a.fetchProductDetailsHandler(e)},a.showFullGalleryHandler=function(){a.props.hideScrollBarHandler()},a.state={index:0,product:null,relatedProducts:[],initiatlIndex:0,loading:!0,partRequested:"overview",favorite:!1},a.escFunction=a.escFunction.bind(Object(Se.a)(a)),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.fetchProductDetailsHandler(),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){clearInterval(this.inter),document.removeEventListener("keydown",this.escFunction,!1)}},{key:"escFunction",value:function(e){27===e.keyCode&&this.props.hideScrollBar&&this.props.showScrollBarHandler()}},{key:"render",value:function(){var e=this,t=this.state.product,a=this.state.relatedProducts;return this.state.loading?o.a.createElement(Q,null):o.a.createElement("div",{className:"single-car"},o.a.createElement("div",{className:"single-car__header"},o.a.createElement("div",{className:"single-car__header__main"},o.a.createElement("div",{className:"single-car__header__main__titleContainer"},o.a.createElement("h1",{className:"single-car__header__main__title"},t.general.title," ",t.general.year),this.props.userId&&o.a.createElement("div",{className:"single-car__header__main__favoriteButton ".concat(this.state.favorite?"active":""),onClick:this.favoriteHandler},this.state.favorite?"Retirer des favoris":"Ajouter aux favoris")),o.a.createElement("div",{className:"single-car__header__main__gallery"},o.a.createElement(Ie.a,{index:this.state.index,onRequestChange:function(t){return e.setState({index:t})}},t.imageUrls.map((function(t){return o.a.createElement(Ie.b,{objectFit:"cover",key:t,src:t,onClick:e.props.hideScrollBarHandler})})))),this.props.hideScrollBar&&o.a.createElement("div",{className:"single-car__header__main__gallery--fullContainer"},o.a.createElement("div",{className:"single-car__header__main__gallery--fullContainer__closeBtn",onClick:this.props.showScrollBarHandler},o.a.createElement(x,{icon:"close"})),o.a.createElement("div",{className:"single-car__header__main__gallery--full"},o.a.createElement(Ie.a,{index:this.state.index,onRequestChange:function(t){return e.setState({index:t})}},t.imageUrls.map((function(e){return o.a.createElement(Ie.b,{objectFit:"contain",key:e,src:e})}))))),o.a.createElement("div",{className:"single-car__header__main__gallery__controller"},t.imageUrls.map((function(t){return o.a.createElement("img",{src:t,alt:"car",key:t,className:"single-car__header__main__gallery__controller__img",onClick:function(){return e.changeGalleryImgIndex(t)}})})))),o.a.createElement("div",{className:"single-car__header__info"},o.a.createElement("div",{className:"single-car__header__info__priceContainer"},o.a.createElement("div",{className:"single-car__header__info__price"}," ",o.a.createElement($,{amount:t.general.price,showCurrency:!0}))),o.a.createElement("ul",{className:"single-car__header__info__list"},o.a.createElement("li",{className:"single-car__header__info__list__item"},o.a.createElement("div",{className:"single-car__header__info__list__item__key"},o.a.createElement(q.a,{id:"reference",defaultMessage:"reference"})),o.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.supplier.reference)),o.a.createElement("li",{className:"single-car__header__info__list__item"},o.a.createElement("div",{className:"single-car__header__info__list__item__key"},o.a.createElement(q.a,{id:"brand",defaultMessage:"brand"})),o.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.brand)),o.a.createElement("li",{className:"single-car__header__info__list__item"},o.a.createElement("div",{className:"single-car__header__info__list__item__key"},o.a.createElement(q.a,{id:"bodyType",defaultMessage:"body type"})),o.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.bodyType)),o.a.createElement("li",{className:"single-car__header__info__list__item"},o.a.createElement("div",{className:"single-car__header__info__list__item__key"},o.a.createElement(q.a,{id:"model",defaultMessage:"model"})),o.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.model)),o.a.createElement("li",{className:"single-car__header__info__list__item"},o.a.createElement("div",{className:"single-car__header__info__list__item__key"},o.a.createElement(q.a,{id:"year",defaultMessage:"year"})),o.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.year)),o.a.createElement("li",{className:"single-car__header__info__list__item"},o.a.createElement("div",{className:"single-car__header__info__list__item__key"},o.a.createElement(q.a,{id:"kilometers",defaultMessage:"kilometers"})),o.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.nbKilometers," km")),o.a.createElement("li",{className:"single-car__header__info__list__item"},o.a.createElement("div",{className:"single-car__header__info__list__item__key"},o.a.createElement(q.a,{id:"YOR",defaultMessage:"YOR"})),o.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.yearOfRelease)),o.a.createElement("li",{className:"single-car__header__info__list__item"},o.a.createElement("div",{className:"single-car__header__info__list__item__key"},o.a.createElement(q.a,{id:"fuel",defaultMessage:"fuel"})),o.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.gazol)),o.a.createElement("li",{className:"single-car__header__info__list__item"},o.a.createElement("div",{className:"single-car__header__info__list__item__key"},o.a.createElement(q.a,{id:"gearBox",defaultMessage:"gear box"})),o.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.transmissionType)),o.a.createElement("li",{className:"single-car__header__info__list__item"},o.a.createElement("div",{className:"single-car__header__info__list__item__key"},o.a.createElement(q.a,{id:"serialNumber",defaultMessage:"serial number"})),o.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.serialNumber)),o.a.createElement("li",{className:"single-car__header__info__list__item"},o.a.createElement("div",{className:"single-car__header__info__list__item__key"},o.a.createElement(q.a,{id:"views",defaultMessage:"views"})),o.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.viewCounter?t.general.viewCounter:"-")),o.a.createElement("li",{className:"single-car__header__info__list__item"},o.a.createElement("div",{className:"single-car__header__info__list__item__key"},o.a.createElement(q.a,{id:"followers",defaultMessage:"followers"})),o.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.followersCounter?t.followersCounter:"-"))))),o.a.createElement("section",{className:"single-car__details"},o.a.createElement("ul",{className:"single-car__details__nav"},o.a.createElement("li",{className:"single-car__details__nav__item\n                                        ".concat("overview"===this.state.partRequested?"active":""),onClick:function(){return e.setState({partRequested:"overview"})}},o.a.createElement(q.a,{id:"overview",defaultMessage:"overview"})),o.a.createElement("li",{className:"single-car__details__nav__item\n                                        ".concat("technical"===this.state.partRequested?"active":""),onClick:function(){return e.setState({partRequested:"technical"})}},o.a.createElement(q.a,{id:"technical",defaultMessage:"technical"})),o.a.createElement("li",{className:"single-car__details__nav__item\n                                        ".concat("features"===this.state.partRequested?"active":""),onClick:function(){return e.setState({partRequested:"features"})}},o.a.createElement(q.a,{id:"features",defaultMessage:"features"}))),"overview"===this.state.partRequested&&o.a.createElement(Te,{product:t}),"technical"===this.state.partRequested&&o.a.createElement(Pe,{product:t}),"features"===this.state.partRequested&&o.a.createElement(Me,{product:t})),o.a.createElement("section",{className:"single-car__related"},o.a.createElement("h2",{className:"single-car__section__title"},o.a.createElement(q.a,{id:"similarVehicles",defaultMessage:"similar vehicles"})),o.a.createElement(ee,{productsList:a,fetchProductDetailsHandler:this.fetchProductDetailsHandler})),o.a.createElement("section",{className:"single-car__mostPopular"},o.a.createElement("h2",{className:"single-car__section__title"},o.a.createElement(q.a,{id:"mostPopular",defaultMessage:"most popular"})),o.a.createElement(ee,{productsList:this.props.mostPopularProducts,fetchProductDetailsHandler:this.fetchProductDetailsHandler})))}}]),t}(s.Component),xe=Object(g.b)((function(e){return{productRequested:e.product.productRequested,mostPopularProducts:e.product.mostPopularProducts,userId:e.auth.userId,userFavorites:e.user.favorites}}),(function(e){return{setProductRequestedData:function(t){return e(v(t))},addUserFavoriteProduct:function(t){return e(function(e){return{type:"ADD_USER_FAVORITE_PRODUCT",product:e}}(t))},removeUserFavoriteProduct:function(t){return e(function(e){return{type:"REMOVE_USER_FAVORITE_PRODUCT",product:e}}(t))}}}))(ke),He=(a(186),a(187),Object(re.defineMessages)({firstName:{id:"firstName",defaultMessage:"first name"},lastName:{id:"lastName",defaultMessage:"last name"},confirmPassword:{id:"confirmPassword",defaultMessage:"confirm password"},password:{id:"password",defaultMessage:"password"}})),De=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={signupForm:{firstName:{value:"",errorLabel:"A firstname"},lastName:{value:"",errorLabel:"A lastname"},email:{value:"",errorLabel:"An email"},password:{value:"",errorLabel:"A password"},confirm_password:{value:"",errorLabel:"A confirmation password"}},error:null},a.inputChangeHandler=function(e,t){a.setState((function(a){return{signupForm:Object(P.a)({},a.signupForm,Object(j.a)({},e,Object(P.a)({},a.signupForm[e],{value:t})))}}))},a.submitHandler=function(e,t){e.preventDefault(),a.props.setLoadingToTrue();var n=_e(t.email,t.password,t.confirm_password,t.firstName,t.lastName);if(n.length>0)return a.setState({error:n}),a.props.setLoadingToFalse(),void a.props.setErrors();var r=new FormData;r.append("firstName",t.firstName.value),r.append("lastName",t.lastName.value),r.append("email",t.email.value),r.append("password",t.password.value),fetch("https://africauto.herokuapp.com/auth/signup",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(r))}).then((function(e){if(422===e.status)throw new Error("Make sure the email isn't used yet");if(200!==e.status&&201!==e.status)throw new Error(" Creating a user failed");return e.json()})).then((function(e){a.props.setLoadingToFalse(),a.props.requestLoginForm()})).catch((function(e){var t=[];t.push(e.message),a.props.setLoadingToFalse(),a.props.setErrors(),a.setState({error:t})}))},a.closeErrorHandler=function(){a.setState({error:null}),a.props.resetErrors()},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.intl.formatMessage;return this.state.error?o.a.createElement(ge,{error:this.state.error,onCloseError:this.closeErrorHandler}):o.a.createElement("form",{className:"auth__form auth__form--signup",onSubmit:function(t){return e.submitHandler(t,e.state.signupForm)},autoComplete:"off",noValidate:!0},o.a.createElement("ul",{className:"auth__input__list"},o.a.createElement(de,{type:"text",control:"input",id:"firstName",value:this.state.signupForm.firstName.value,label:"pr\xe9nom",onChange:this.inputChangeHandler,placeholder:t(He.firstName),border:!0,required:!0}),o.a.createElement(de,{type:"text",control:"input",label:"nom",id:"lastName",value:this.state.signupForm.lastName.value,onChange:this.inputChangeHandler,placeholder:t(He.lastName),border:!0,required:!0}),o.a.createElement(de,{type:"email",control:"input",label:"email",id:"email",value:this.state.signupForm.email.value,onChange:this.inputChangeHandler,placeholder:"email",border:!0,required:!0}),o.a.createElement(de,{type:"password",control:"input",label:"mot de passe",id:"password",value:this.state.signupForm.password.value,onChange:this.inputChangeHandler,placeholder:t(He.password),border:!0,autoComplete:"new-password",required:!0}),o.a.createElement(de,{id:"confirm_password",label:"confirmer mot de passe",placeholder:t(He.confirmPassword),type:"password",control:"input",required:!0,border:!0,value:this.state.signupForm.confirm_password.value,onChange:this.inputChangeHandler})),o.a.createElement("div",{className:"signup__options"},o.a.createElement("div",{className:"signup__options--1"},o.a.createElement(q.a,{id:"alreadyHaveAnAccount",defaultMessage:"already have an account"})," ?")),o.a.createElement("div",{className:"auth__button"},o.a.createElement(X,{color:"primary",type:"submit"},o.a.createElement(q.a,{id:"signUp",defaultMessage:"sign up"}))))}}]),t}(s.Component),qe=Object(se.c)(De),Le=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={requestedForm:"signup",loading:!1,error:!1},a.setRequestedForm=function(e){a.setState({requestedForm:e})},a.setLoadingToTrue=function(){a.setState({loading:!0})},a.setLoadingToFalse=function(){a.setState({loading:!1})},a.setErrors=function(){a.setState({error:!0})},a.resetErrors=function(){a.setState({error:!1})},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(s.Fragment,null,!0===this.state.loading&&o.a.createElement(Q,null),o.a.createElement("section",{className:"auth"},o.a.createElement("div",{className:"auth__container"},!1===this.state.error&&o.a.createElement("div",{className:"auth__controller"},o.a.createElement("div",{className:"auth__controller__button \n                                                ".concat("signup"===this.state.requestedForm?"active":""),onClick:function(){return e.setRequestedForm("signup")}},o.a.createElement(q.a,{id:"signUp",defaultMessage:"sign up"})),o.a.createElement("div",{className:"auth__controller__button \n                                                ".concat("login"===this.state.requestedForm?"active":""),onClick:function(){return e.setRequestedForm("login")}},o.a.createElement(q.a,{id:"login",defaultMessage:"login"}))),"signup"===this.state.requestedForm&&o.a.createElement(qe,{setLoadingToTrue:this.setLoadingToTrue,setLoadingToFalse:this.setLoadingToFalse,setErrors:this.setErrors,resetErrors:this.resetErrors,requestLoginForm:function(){return e.setRequestedForm("login")}}),"login"===this.state.requestedForm&&o.a.createElement(Ee,{setLoadingToTrue:this.setLoadingToTrue,setLoadingToFalse:this.setLoadingToFalse,setErrors:this.setErrors,resetErrors:this.resetErrors}))))}}]),t}(s.Component),Re=(a(188),a(189),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={messages:null,messageInput:""},a.readNewMessagesHandler=function(){var e="https://africauto.herokuapp.com/messages/"+a.props.userId,t=V();fetch(e,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({timeStamp:t,userName:a.props.userName.split(" ")[0]})}).then((function(e){if(200!==e.status)throw new Error("Failed to fetch messages");return e.json()})).then((function(e){console.log("resdata",e)})).catch((function(e){console.log(e)}))},a.addMessages=function(e){var t=[].concat(Object(B.a)(a.state.messages),[e]);a.setState({messages:t},(function(){return a.scrollToBottom()}))},a.messageChangeHandler=function(e){a.setState({messageInput:e})},a.sendMessageHandler=function(){if(""!==a.state.messageInput){var e=V(),t="https://africauto.herokuapp.com/messages/user/"+a.props.userId;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:a.props.userName.split(" ")[0],message:a.state.messageInput,timeStamp:e})}).then((function(e){return e.json()})).then((function(e){a.addMessages(e.data),a.setState({messageInput:""},(function(){return a.scrollToBottom()}))})).catch((function(e){console.log(e)}))}},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t="https://africauto.herokuapp.com/messages/"+this.props.userId;fetch(t,{headers:{"Content-Type":"application/json"},method:"GET"}).then((function(e){if(200!==e.status)throw new Error("Failed to fetch messages");return e.json()})).then((function(t){console.log(t),e.props.newMessage>0&&(e.props.resetNewMessageNotification(),e.readNewMessagesHandler()),e.setState({messages:t.messages.messages},(function(){return e.scrollToBottom()}))})).catch((function(e){console.log(e)})),N()("https://africauto.herokuapp.com").on("adminSentMessage",(function(t){e.props.userId===t.messageData.userId&&(e.readNewMessagesHandler(),e.addMessages(t.messageData))}))}},{key:"scrollToBottom",value:function(){this.messagesEnd.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.messages,r=a.messageInput;return e=n&&n.length>0?o.a.createElement(G,{messages:n}):o.a.createElement("div",{className:"messagesContainer__body__start"},o.a.createElement(q.a,{id:"startConversation",defaultMessage:"start conversation"})),o.a.createElement("div",{className:"messages"},o.a.createElement("div",{className:"messages__body"},e,o.a.createElement("div",{ref:function(e){t.messagesEnd=e}})),o.a.createElement("div",{className:"messages__sender"},o.a.createElement("div",{className:"messages__sender__textareaContainer"},o.a.createElement(Y,{value:r,placeholder:"message",onChange:this.messageChangeHandler,className:"messages__sender__textarea"}),o.a.createElement(x,{icon:"send",onClick:this.sendMessageHandler,customClass:"messages__sender__sender-btn"}))))}}]),t}(s.Component)),Ae=Object(g.b)((function(e){return{userId:e.auth.userId,userName:e.auth.userName,newMessage:e.notification.newMessage}}),(function(e){return{addNewMessageNotification:function(t){return e(y(t))},resetNewMessageNotification:function(){return e({type:"RESET_NEW_MESSAGE_NOTIFICATION"})}}}))(Re),Fe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,scrolling:!1},a.requestProductDetails=function(e){a.props.setProductRequestedData(e),a.props.history.push("/car/".concat(e.productId))},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){"/my-account/messages"!==this.props.location.pathname?this.setState({scrolling:!0}):this.setState({scrolling:!1})}},{key:"componentDidUpdate",value:function(e){e.location.pathname!==this.props.location.pathname&&("/my-account/messages"===this.props.location.pathname?this.setState({scrolling:!1}):this.setState({scrolling:!0}))}},{key:"render",value:function(){var e=this.props.favorites,t=this.state.scrolling;return o.a.createElement("div",{className:"account"},o.a.createElement("div",{className:"account__sidebar"},o.a.createElement("ul",{className:"account__sidebar__list"},o.a.createElement(i.c,{to:"/my-account/messages",className:"account__sidebar__list__item"},o.a.createElement(x,{icon:"email"}),o.a.createElement("span",null,"Messages")),o.a.createElement(i.c,{to:"/my-account/favorites",className:"account__sidebar__list__item"},o.a.createElement(x,{icon:"heart"}),o.a.createElement("span",null,o.a.createElement(q.a,{id:"favorites",defaultMessage:"favorites"})))),o.a.createElement("div",{className:"account__sidebar__logout",onClick:this.props.logoutHandler},o.a.createElement("span",null,o.a.createElement(q.a,{id:"logout",defaultMessage:"logout"})))),o.a.createElement("div",{className:"account__currentSection ".concat(t?"scroll":"")},o.a.createElement(h.c,null,o.a.createElement(h.a,{path:"/my-account/favorites",render:function(t){return o.a.createElement(ee,Object.assign({},t,{productsList:e}))}}),o.a.createElement(h.a,{path:"/my-account/messages",component:Ae}))))}}]),t}(s.Component),Ue=Object(g.b)((function(e){return{userId:e.auth.userId,favorites:e.user.favorites}}),(function(e){return{setProductRequestedData:function(t){return e(v(t))}}}))(Object(h.f)(Fe)),Be=(a(190),Object(re.defineMessages)({purchase:{id:"purchase",defaultMessage:"purchase"},vehicle_paper:{id:"vehicle_paper",defaultMessage:"vehicle_paper"},customs_clearance:{id:"customs_clearance",defaultMessage:"customs_clearance"},insurance:{id:"insurance",defaultMessage:"insurance"}})),Ve=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e,t=this.props.intl.formatMessage,a=(e={},Object(j.a)(e,t(Be.purchase),["basic","conventionnel","tranquility","cl\xe9s en main"]),Object(j.a)(e,t(Be.vehicle_paper),["basic","conventionnel","tranquility","cl\xe9s en main"]),Object(j.a)(e,"transport",["conventionnel","tranquility","cl\xe9s en main"]),Object(j.a)(e,t(Be.customs_clearance),["conventionnel","tranquility","cl\xe9s en main"]),Object(j.a)(e,t(Be.insurance),["tranquility","cl\xe9s en main"]),e),n=["basic","conventionnel","tranquility","cl\xe9s en main"];return o.a.createElement("div",{className:"services"},o.a.createElement("header",{className:"services__header"},o.a.createElement("h1",{className:"services__header__title"},o.a.createElement(q.a,{id:"yourNextCarHere",defaultMessage:"your next car is here"})),o.a.createElement("div",{className:"services__header__text"},o.a.createElement(q.a,{id:"serviceText",defaultMessage:"Wherever you are, we have what you need. We offer 4 different types of service depending on the place of delivery. We also give our customers the possibility to choose a customized package. Therefore, we invite you to contact one of our agents."}))),o.a.createElement("table",{className:"services__table"},o.a.createElement("thead",{className:"services__table__header"},o.a.createElement("tr",null,o.a.createElement("th",null,"\xa0"),n.map((function(e,t){return o.a.createElement("th",{key:t},e)})))),o.a.createElement("tbody",{className:"services__table__data"},Object.keys(a).map((function(e,t){return o.a.createElement("tr",{key:t,className:"services__table__data__row"},o.a.createElement("td",null,e.split("_").length>1?"".concat(e.split("_")[0],"     ").concat(e.split("_")[1]," ").concat(void 0!==e.split("_")[2]?e.split("_")[2]:"","    "):e),n.map((function(t,n){return a[e].includes(t)?o.a.createElement("td",{className:"services__table__data__row__checked",key:n},o.a.createElement(x,{icon:"checkmark"})):o.a.createElement("td",{className:"services__table__data__row__unchecked",key:n},o.a.createElement(x,{icon:"cross"}))})))})))))}}]),t}(s.Component),ze=Object(g.b)((function(e){return{lang:e.parameters.lang,currency:e.parameters.currency}}))(Object(se.c)(Ve)),We=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={carsHomeIntro:[],carsHomeInventory:[],loading:!1,hideScrollBar:!1,hideFooter:!1,scrolled:!1,scrollDirection:"bottom",lang:"english"},a.listenToScroll=function(){var e=document.body.scrollTop||document.documentElement.scrollTop,t=e<50;!t&&a.scrollPos>e&&(a.scrollPos=e,a.setState({scrolled:!0,scrollDirection:"top"})),!t&&a.scrollPos<e&&(a.scrollPos=e,a.setState({scrolled:!0,scrollDirection:"bottom"})),t&&(a.scrollPos=e,a.setState({scrolled:!1}))},a.initAppDataHandler=function(){fetch("https://africauto.herokuapp.com/product/init",{method:"GET",headers:{"Content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Error fetching products");return e.json()})).then((function(e){a.props.initAppData(e),a.setState({carsHomeIntro:e.publicityProducts,carsHomeInventory:e.homeInventoryProducts,loading:!1})})).catch((function(e){console.log(e)}))},a.startConnection=function(e,t){fetch("https://africauto.herokuapp.com/auth/start-connection",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({userId:e,timeStamp:t})}).then((function(e){if(401===e.status)throw new Error("UserId not valid");if(200!==e.status&&201!==e.status)throw new Error("Could not update last connection");return e.json()})).then((function(t){N()("https://africauto.herokuapp.com/",{query:"data=".concat(e," ").concat(t.connectionId)}).connect(),a.props.setConnectionId(t.connectionId)})).catch((function(e){console.log(e)}))},a.logoutHandler=function(){a.props.setLoginStateToFalse();var e=V(),t=localStorage.getItem("woto-userId"),n=a.props.connectionId;a.endConnection(t,n,e,!0),a.props.history.push("/")},a.endConnection=function(e,t,a,n){fetch("https://africauto.herokuapp.com/auth/end-connection",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({userId:e,connectionId:t,timeStamp:a})}).then((function(e){if(401===e.status)throw new Error("UserId not valid");if(200!==e.status&&201!==e.status)throw new Error("Could not update last connection")})).then((function(){localStorage.removeItem("woto-connectionId"),!0===n&&(localStorage.removeItem("woto-token"),localStorage.removeItem("woto-expiryDate"),localStorage.removeItem("woto-userId"),localStorage.removeItem("woto-userName"))})).catch((function(e){console.log(e)}))},a.initUserFavoriteProducts=function(e){fetch("https://africauto.herokuapp.com/user/favorites/"+e,{headers:{"Content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Error fetching products");return e.json()})).then((function(e){a.props.setUserFavoriteProducts(e.favorites)})).catch((function(e){console.log(e)}))},a.showScrollBarHandler=function(){a.setState({hideScrollBar:!1},(function(){return document.body.className=""}))},a.hideScrollBarHandler=function(){a.setState({hideScrollBar:!0},(function(){return document.body.className="hideScrollBar"}))},a.playNotificationSound=function(){a.player.play()},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.listenToScroll),this.scrollPos=0,this.scrollDirection="bottom";var e=T.a.parse(this.props.location.search);Object.keys(e).length>0?(this.props.setLang(e.lang),this.props.setCurrency(e.currency)):this.props.history.push({pathname:this.props.history.pathname,search:"currency=".concat(this.props.currency,"&lang=").concat(this.props.lang)}),this.setState({loading:!0}),this.initAppDataHandler();var t=localStorage.getItem("woto-token"),a=localStorage.getItem("woto-expiryDate"),n=localStorage.getItem("woto-userId"),r=localStorage.getItem("woto-userName");if(t&&a){if(new Date(a)<=new Date)return console.log("Token not valid anymore"),void this.props.setLoginStateToFalse();this.props.location.pathname.includes("/my-account")&&this.setState({hideFooter:!0});var s={isAuth:!0,token:t,userId:n,userName:r};this.props.setLoginStateToTrue(s),this.initUserFavoriteProducts(s.userId);var o=V();this.startConnection(n,o)}else console.log("NO TOKEN")}},{key:"componentDidUpdate",value:function(e){e.location.pathname!==this.props.location.pathname&&(this.props.location.pathname.includes("/my-account")?this.setState({hideFooter:!0}):this.setState({hideFooter:!1}),this.props.location.pathname.includes("/inventory")||this.props.history.push({pathname:this.props.history.pathname,search:"currency=".concat(this.props.currency,"&lang=").concat(this.props.lang)})),e.lang!==this.props.lang&&this.setState({lang:this.props.lang})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.listenToScroll)}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.loading,r=a.hideScrollBar,c=a.hideFooter,l=a.scrolled,i=a.scrollDirection,u=a.lang,m=window.innerWidth,d={french:"fr",english:"en"};return e=!0!==n&&this.props.brandAndModelsData?o.a.createElement("div",{className:"app"},m>850&&o.a.createElement(s.Fragment,null,o.a.createElement(D,{scrolled:l,scrollDirection:i}),o.a.createElement(L,{scrolled:l,scrollDirection:i})),m<=850&&o.a.createElement(A,{logoutHandler:this.logoutHandler}),o.a.createElement("audio",{src:O.a,ref:function(e){return t.player=e}}),m>600&&this.props.auth&&this.props.token&&this.props.userId&&o.a.createElement(K,{playNotificationSound:this.playNotificationSound}),o.a.createElement(h.c,null,o.a.createElement(h.a,{exact:!0,path:"/",render:function(e){return o.a.createElement(Ne,Object.assign({},e,{carsHomeIntro:t.state.carsHomeIntro,carsHomeInventory:t.state.carsHomeInventory}))}}),o.a.createElement(h.a,{path:"/inventory/:prodId",render:function(e){return o.a.createElement(xe,Object.assign({},e,{hideScrollBar:r,showScrollBarHandler:t.showScrollBarHandler,hideScrollBarHandler:t.hideScrollBarHandler}))}}),o.a.createElement(h.a,{path:"/inventory",component:je}),o.a.createElement(h.a,{path:"/auth",component:Le}),o.a.createElement(h.a,{path:"/my-account",render:function(e){return o.a.createElement(Ue,Object.assign({},e,{logoutHandler:t.logoutHandler}))}}),o.a.createElement(h.a,{path:"/services",component:ze})),o.a.createElement(U,{hide:c})):o.a.createElement(Q,null),o.a.createElement(C.a,{locale:d[u],messages:S[d[u]]},e)}}]),t}(s.Component),Ye=Object(g.b)((function(e){return{auth:e.auth.auth,token:e.auth.token,userId:e.auth.userId,connectionId:e.auth.connectionId,brandAndModelsData:e.product.brandAndModelsData,lang:e.parameters.lang,currency:e.parameters.currency}}),(function(e){return{setLoginStateToTrue:function(t){return e(function(e){return{type:"SET_LOGIN_STATE_TO_TRUE",isAuth:e.isAuth,token:e.token,userId:e.userId,userName:e.userName}}(t))},setLoginStateToFalse:function(){return e({type:"SET_LOGIN_STATE_TO_FALSE"})},setConnectionId:function(t){return e({type:"SET_CONNECTION_ID",connectionId:t})},initAppData:function(t){return e(function(e){return{type:"INIT_APP_DATA",data:e}}(t))},setUserFavoriteProducts:function(t){return e(function(e){return{type:"SET_USER_FAVORITE_PRODUCTS",favorites:e}}(t))},setLang:function(t){return e(f(t))},setCurrency:function(t){return e(E(t))}}}))(Object(h.f)(We));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ge=a(29),Je=function(e,t){return Object(P.a)({},e,{},t)},Ke={auth:!1,token:null,userId:null,connectionId:null,userName:null},Qe=function(e,t){return Je(e,{auth:!0,token:t.token,userId:t.userId,connectionId:t.connectionId,userName:t.userName})},Xe=function(e,t){return Je(e,{auth:t.isAuth,token:t.token,userId:t.userId,userName:t.userName})},$e=function(e){return Je(e,{auth:!1,token:null,userId:null,userName:null,connectionId:null})},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCEDED":return Qe(e,t);case"LOGIN_FAILED":return;case"SET_LOGIN_STATE_TO_TRUE":return Xe(e,t);case"SET_LOGIN_STATE_TO_FALSE":return $e(e);case"SET_CONNECTION_ID":return Je(e,{connectionId:t.connectionId});default:return e}},et={brandAndModelsData:null,mostPopularProducts:null,price:null,mostPopularSedan:null,productRequested:null,bodyTypeList:null,totalProductsCounter:null,currentInventoryPage:1,itemsPerPage:20},tt=function(e,t){return Je(e,{brandAndModelsData:t.data.brandAndModelsData,mostPopularProducts:t.data.mostPopularProducts,price:t.data.price,mostPopularSedan:t.data.mostPopularSedan,bodyTypeList:t.data.bodyTypeList,totalProductsCounter:t.data.totalProductsCounter})},at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRODUCT_REQUESTED_ID":return Je(e,{productRequested:t.data});case"INIT_APP_DATA":return tt(e,t);case"SET_INVENTORY_CURRENT_PAGE":return Je(e,{currentInventoryPage:t.currentPage});case"SET_PRICE":return Je(e,{price:t.data});default:return e}},nt={favorites:[]},rt=function(e,t){return Je(e,{favorites:[].concat(Object(B.a)(e.favorites),[t.product])})},st=function(e,t){var a=e.favorites.filter((function(e){return e._id!==t.product._id}));return Je(e,{favorites:a})},ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_FAVORITE_PRODUCTS":return Je(e,{favorites:t.favorites});case"ADD_USER_FAVORITE_PRODUCT":return rt(e,t);case"REMOVE_USER_FAVORITE_PRODUCT":return st(e,t);default:return e}},ct={lang:"english",currency:"CAD",quotes:{USDCAD:1.32357,USDEUR:.92693,EURUSD:1.0788,EURCAD:1.4289,CADUSD:.7555,CADEUR:.6998}},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LANG":return Je(e,{lang:t.lang});case"SET_CURRENCY":return Je(e,{currency:t.currency});default:return e}},it={newMessage:0},ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_A_NEW_MESSAGE_NOTIFICATION":return Je(e,{newMessage:e.newMessage+t.data});case"RESET_NEW_MESSAGE_NOTIFICATION":return Je(e,{newMessage:0});default:return e}},mt=a(83),dt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ge.d,_t=Object(Ge.c)({auth:Ze,product:at,user:ot,parameters:lt,notification:ut}),pt=Object(Ge.e)(_t,dt(Object(Ge.a)(mt.a)));l.a.render(o.a.createElement(g.a,{store:pt},o.a.createElement(i.a,null,o.a.createElement(Ye,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},77:function(e,t,a){e.exports=a.p+"static/media/eventually.b5e7acad.mp3"},78:function(e,t,a){e.exports=a.p+"static/media/sprite.be8a817b.svg"},86:function(e,t,a){e.exports=a(191)},91:function(e,t,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.127fb8bd.chunk.js.map