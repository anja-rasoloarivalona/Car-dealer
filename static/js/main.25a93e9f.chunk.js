(this.webpackJsonpafricauto=this.webpackJsonpafricauto||[]).push([[0],{115:function(e,t){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){},181:function(e,t,a){},182:function(e,t,a){},191:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(25),o=a.n(s),c=a(10),l=a(4),i=a(5),u=a(6),m=a(2),_=a(7),d=(a(83),a(24)),p=a(9),h=function(e){return{type:"SET_PRODUCT_REQUESTED_ID",data:e}},v=function(e){return{type:"SET_LANG",lang:e}},g=function(e){return{type:"SET_CURRENCY",currency:e}},f=function(e){return{type:"ADD_A_NEW_MESSAGE_NOTIFICATION",data:e}},E=a(22),y=a.n(E),b=a(76),N=a(69),C=a.n(N),O=(a(118),a(119),a(70)),w=a.n(O),S=function(e){return r.a.createElement("svg",{viewBox:"0 0 16 16",onClick:e.onClick,className:"icon icon-".concat(e.icon," ").concat(e.size," ").concat(e.customClass),xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},r.a.createElement("use",{xlinkHref:"".concat(w.a,"#icon-").concat(e.icon)}))},I=a(3),j=(a(120),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={showList:!1},a.toggleList=function(){a.setState((function(e){return Object(I.a)({},e,{showList:!e.showList})}))},a.handleClick=function(e){a.target&&a.target.contains(e.target)||a.state.showList&&a.toggleList()},a}return Object(_.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"render",value:function(){var e=this,t=this.props.list,a=this.state.showList;return r.a.createElement("div",{className:"drop-down-list ".concat(a?"show":""),ref:function(t){return e.target=t},onClick:this.toggleList},r.a.createElement("div",{className:"drop-down-list__value"},this.props.value,r.a.createElement(S,{icon:"arrow_down"})),r.a.createElement("ul",{className:"drop-down-list__list"},t.map((function(t){return r.a.createElement("li",{className:"drop-down-list__list__item\n                                        ".concat(t.value&&e.props.value===t.value?"active":"","\n                                        ").concat(t.text&&e.props.value===t.text?"active":"","\n                                        ").concat(e.props.value===t?"active":""),key:t.text?t.text:t,onClick:function(){return e.props.selectItemHandler(t.value?t.value:t)}},t.text?t.text:t)}))))}}]),t}(n.Component)),T=Object(p.b)((function(e){return{lang:e.parameters.lang,currency:e.parameters.currency,price:e.product.price}}),(function(e){return{setLang:function(t){return e(v(t))},setCurrency:function(t){return e(g(t))},setPrice:function(t){return e({type:"SET_PRICE",data:t})}}}))(Object(d.f)((function(e){return r.a.createElement("div",{className:"navtop \n\n                        "},r.a.createElement("div",{className:"navtop__logo"},"WOTO"),r.a.createElement("div",{className:"navtop__contact"},r.a.createElement("div",{className:"navtop__contact__detail"},r.a.createElement(S,{icon:"phone"}),r.a.createElement("div",null,"+1 438 896 2026")),r.a.createElement("div",{className:"navtop__contact__detail"},r.a.createElement(S,{icon:"email"}),r.a.createElement("div",null,"wotto@gmail.com"))),r.a.createElement("div",{className:"navtop__cta"},r.a.createElement(j,{value:e.lang,list:["english","spanish","french"],selectItemHandler:e.setLang}),r.a.createElement(j,{value:e.currency,list:["CAD","USD","EUR"],selectItemHandler:function(t){e.history.push({pathname:e.history.pathname,search:"lang=".concat(e.lang,"&currency=").concat(t)}),e.setCurrency(t)}})))}))),P=(a(122),Object(p.b)((function(e){return{isAuth:e.auth.auth,userName:e.auth.userName,lang:e.parameters.lang}}))(Object(d.f)((function(e){var t=e.userName,a=e.isAuth;return r.a.createElement("nav",{className:"navbarContainer \n                            ".concat(e.scrolled?"fixed":"","\n                            ")},r.a.createElement("ul",{className:"navbar__list"},r.a.createElement(c.c,{exact:!0,to:"/Car-dealer",className:"navbar__list__item"},"Home"),r.a.createElement(c.c,{to:"Car-dealer/inventory",className:"navbar__list__item"},"Inventory"),r.a.createElement(c.c,{to:"Car-dealer/services",className:"navbar__list__item"},"Services")),r.a.createElement("div",{className:"navbar__cta"},!a&&r.a.createElement(c.b,{className:"navbar__cta__login",to:"Car-dealer/auth"},r.a.createElement(S,{icon:"user"}),r.a.createElement("span",null,"Login")),a&&r.a.createElement("div",{className:"navbar__cta__avatar",onClick:function(){return e.history.push("/my-account/messages")}},r.a.createElement("span",null,t.split(" ")[0].slice(0,1),t.split(" ")[1].slice(0,1)))))})))),k=(a(123),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={showNavList:!1,showLogout:!1},a.toggleNavList=function(){a.setState((function(e){return Object(I.a)({},e,{showNavList:!e.showNavList})}))},a.toggleShowLogout=function(){a.setState((function(e){return Object(I.a)({},e,{showLogout:!e.showLogout})}))},a.setCurrency=function(e){a.props.history.push({pathname:a.props.history.pathname,search:"lang=".concat(a.props.lang,"&currency=").concat(e)}),a.props.setCurrency(e),a.toggleNavList()},a.setLang=function(e){a.props.history.push({pathname:a.props.history.pathname,search:"lang=".concat(e,"&currency=").concat(a.props.currency)}),a.props.setLang(e),a.toggleNavList()},a}return Object(_.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.showNavList,a=e.showLogout,n=this.props.userName,s=this.props.isAuth;return r.a.createElement("div",{className:"mobile-nav"},r.a.createElement("div",{className:"mobile-nav__group"},r.a.createElement("div",{className:"mobile-nav__toggler",onClick:this.toggleNavList},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null)),r.a.createElement("div",{className:"mobile-nav__logo"},r.a.createElement(c.b,{to:"/inventory"},"WOTO"))),r.a.createElement("div",{className:"mobile-nav__group"},r.a.createElement(c.b,{to:"/my-account/messages"},r.a.createElement(S,{icon:"email"})),r.a.createElement(c.b,{to:"/my-account/favorites"},r.a.createElement(S,{icon:"heart"})),!s&&r.a.createElement(c.b,{className:"mobile-nav__login",to:"/auth"},"Login"),s&&window.innerWidth>738&&r.a.createElement(c.b,{className:"mobile-nav__avatar",to:"/my-account/messages"},r.a.createElement("span",null,n.split(" ")[0].slice(0,1),n.split(" ")[1].slice(0,1))),s&&window.innerWidth<=738&&r.a.createElement("div",{className:"mobile-nav__avatar",to:"/my-account/messages",onClick:this.toggleShowLogout},r.a.createElement("span",null,n.split(" ")[0].slice(0,1),n.split(" ")[1].slice(0,1)),r.a.createElement("div",{className:"mobile-nav__logout ".concat(a?"show":""),onClick:this.props.logoutHandler},"Logout"))),t&&r.a.createElement("div",{className:"mobile-nav__backdrop",onClick:this.toggleNavList}),r.a.createElement("div",{className:"mobile-nav__listContainer  ".concat(t?"show":"")},r.a.createElement("ul",{className:"mobile-nav__list"},r.a.createElement(c.c,{exact:!0,to:"/",className:"mobile-nav__list__item",onClick:this.toggleNavList},"Home"),r.a.createElement(c.c,{to:"/inventory",className:"mobile-nav__list__item",onClick:this.toggleNavList},"Inventory"),r.a.createElement(c.c,{to:"/services",className:"mobile-nav__list__item",onClick:this.toggleNavList},"Services")),r.a.createElement("div",{className:"mobile-nav__parameters"},r.a.createElement(j,{value:this.props.lang,list:["english","spanish","french"],selectItemHandler:this.setLang}),r.a.createElement(j,{value:this.props.currency,list:["CAD","USD","EUR"],selectItemHandler:this.setCurrency})),r.a.createElement("div",{className:"mobile-nav__list__socialMedia"},r.a.createElement(S,{icon:"facebook"}),r.a.createElement(S,{icon:"instagram"}),r.a.createElement(S,{icon:"twitter"}))))}}]),t}(n.Component)),H=Object(p.b)((function(e){return{isAuth:e.auth.auth,userName:e.auth.userName,lang:e.parameters.lang,currency:e.parameters.currency}}),(function(e){return{setLang:function(t){return e(v(t))},setCurrency:function(t){return e(g(t))}}}))(Object(d.f)(k)),D=(a(124),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={susbscribed:!1,subscribeInput:""},a.changeInputHandler=function(e){a.setState({subscribeInput:e})},a.subscribeHandler=function(){a.setState({susbscribed:!0,subscribeInput:""})},a.setCurrencyHandler=function(e){a.props.history.push({pathname:a.props.history.pathname,search:"lang=".concat(a.props.lang,"&currency=").concat(e)}),a.props.setCurrency(e),window.scrollTo(0,0)},a}return Object(_.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.susbscribed,n=t.subscribeInput,s=this.props.hide;return r.a.createElement("footer",{className:"footer ".concat(s?"hide":"")},r.a.createElement("ul",{className:"footer__list"},r.a.createElement("li",{className:"footer__list__group"},r.a.createElement("div",{className:"footer__list__item"},r.a.createElement("h3",{className:"footer__title"},"WOTO Motors"),r.a.createElement("p",null,"Aliquam non lacus nec ligula efficitur malesuada ac sit amet orci. Aliquam volutpat, sapien eu blandit laoreet, sapien quam semper nunc, a mollis turpis lacus vitae nibh. Nullam eleifend varius dolor, quis dapibus sem tempor eget. Nulla sed aliquam nibh. In eu luctus tortor. Vestibulum ullamcorper ex nisl,")),r.a.createElement("div",{className:"footer__list__item"},r.a.createElement("h3",{className:"footer__title"},"Site map"),r.a.createElement("ul",{className:"footer__list__item__list"},r.a.createElement("li",{className:"footer__list__item__list__item"},r.a.createElement("a",{href:"/"},"Home")),r.a.createElement("li",{className:"footer__list__item__list__item"},r.a.createElement("a",{href:"/inventory"},"Inventory")),r.a.createElement("li",{className:"footer__list__item__list__item"},r.a.createElement("a",{href:"/services"},"Services"))))),r.a.createElement("li",{className:"footer__list__group"},r.a.createElement("div",{className:"footer__list__item"},r.a.createElement("h3",{className:"footer__title"},"Subscribe"),r.a.createElement("div",{className:"footer__inputContainer"},r.a.createElement("input",{className:"footer__input",value:n,type:"email",placeholder:"email",onChange:function(t){return e.changeInputHandler(t.target.value)}}),r.a.createElement(S,{icon:"send",onClick:this.subscribeHandler})),a&&r.a.createElement("p",null,"You've been subscribed. Thank you for joining us"),!a&&r.a.createElement("p",null,"Get latest updates and offers")),r.a.createElement("div",{className:"footer__list__item"},r.a.createElement("h3",{className:"footer__title"},"Parameters"),r.a.createElement("ul",{className:"footer__list__item__list"},r.a.createElement("li",{className:"footer__list__item__list__item"},r.a.createElement(j,{value:this.props.lang,list:["english","spanish","french"],selectItemHandler:this.props.setLang})),r.a.createElement("li",{className:"footer__list__item__list__item"},r.a.createElement(j,{value:this.props.currency,list:["CAD","USD","EUR"],selectItemHandler:this.setCurrencyHandler})))))),r.a.createElement("div",{className:"footer__copyRight"},r.a.createElement("span",null,"\xa9 Anja Rasoloarivalona - 2019"),r.a.createElement("ul",{className:"footer__socialNetwork__list"},r.a.createElement(S,{icon:"facebook"}),r.a.createElement(S,{icon:"instagram"}),r.a.createElement(S,{icon:"twitter"}),r.a.createElement(S,{icon:"google-plus"}))))}}]),t}(n.Component)),q=Object(p.b)((function(e){return{lang:e.parameters.lang,currency:e.parameters.currency}}),(function(e){return{setLang:function(t){return e(v(t))},setCurrency:function(t){return e(g(t))}}}))(Object(d.f)(D)),x=a(13),L=(a(125),function(){var e,t=new Date,a=t.getDate();e=a<10?"0"+a:a;var n=t.getMonth()+1,r=t.getFullYear(),s=t.getHours(),o=t.getMinutes(),c=t.getSeconds();return"".concat(e,"-").concat(n,"-").concat(r," ").concat(s,":").concat(o,":").concat(c)}),A=a(72),R=a.n(A),M=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.textarea.focus(),R()(this.textarea)}},{key:"render",value:function(){var e=this;return r.a.createElement("textarea",{style:{maxHeight:"9rem",minHeight:"4rem",resize:"none",padding:".7rem",boxSizing:"border-box",fontSize:"1.6rem"},ref:function(t){return e.textarea=t},placeholder:this.props.placeholder,rows:1,value:this.props.value,onChange:function(t){return e.props.onChange(t.target.value)},className:this.props.className})}}]),t}(n.Component),F=(a(126),function(e){var t,a,n=e.messages,s="",o=n[0].timeStamp,c=n[0].timeStamp.slice(0,5);return a=n[0].senderType,n.map((function(e,l,i){var u=i[l].timeStamp.slice(0,5);return 0===l?s=o:u!==c&&l+1<i.length?(s=n[l].timeStamp,c=n[l].timeStamp.slice(0,5)):s="",l+1<i.length&&i[l+1].senderType===a?t="small":(t="big",l+1<i.length&&(a=i[l+1].senderType)),r.a.createElement("div",{key:e._id,className:"messagesContainer__body__chatContainer"},""!==s&&r.a.createElement("div",{className:"messagesContainer__body__chat__convoDate"},s),r.a.createElement("div",{className:"messagesContainer__body__chat               \n                                ".concat("small"===t?"small-gap":"big-gap")},r.a.createElement("div",{className:"messagesContainer__body__chat__content \n                                    ".concat("user"===e.senderType?"user":"admin")},e.message)))}))}),U=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={messages:null,messageInput:"",showChat:!0,name:""},a.readNewMessagesHandler=function(){var e="http://localhost:8000/messages/"+a.props.userId,t=L();fetch(e,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({timeStamp:t,userName:a.state.name})}).then((function(e){if(200!==e.status)throw new Error("Failed to fetch messages");return e.json()})).then((function(e){console.log("resdata",e)})).catch((function(e){console.log(e)}))},a.sendMessageHandler=function(){if(""!==a.state.messageInput.trim()){var e=L(),t="http://localhost:8000/messages/user/"+a.props.userId;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:a.state.name,message:a.state.messageInput,timeStamp:e})}).then((function(e){return e.json()})).then((function(e){a.addMessages(e.data),a.setState({messageInput:""})})).catch((function(e){console.log(e)}))}else alert("Please enter a message")},a.addMessages=function(e){var t=[].concat(Object(x.a)(a.state.messages),[e]);a.setState({messages:t},(function(){return a.scrollToBottom()}))},a.messageChangeHandler=function(e){a.setState({messageInput:e})},a.toggleShowChat=function(){var e=0;a.state.messages.forEach((function(t){!1===t.read&&e++})),a.props.newMessage>0&&(e+=a.props.newMessage),e>0&&(a.readNewMessagesHandler(),a.props.resetNewMessageNotification()),a.setState((function(e){return{showChat:!e.showChat}}))},a}return Object(_.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t="http://localhost:8000/messages/"+this.props.userId;fetch(t,{headers:{"Content-Type":"application/json"},method:"GET"}).then((function(e){if(200!==e.status)throw new Error("Failed to fetch messages");return e.json()})).then((function(t){var a=t.messages.messages,n=0;a.forEach((function(e){!1===e.read&&n++})),n>0&&e.props.addNewMessageNotification(n),e.setState({messages:t.messages.messages,name:e.props.userName},(function(){return e.scrollToBottom()}))})).catch((function(e){console.log(e)})),y()("http://localhost:8000").on("adminSentMessage",(function(t){e.props.userId===t.messageData.userId&&(e.props.playNotificationSound(),e.addMessages(t.messageData),!0===e.state.showChat?e.readNewMessagesHandler():e.props.addNewMessageNotification(1))}))}},{key:"scrollToBottom",value:function(){this.messagesEnd.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e,t=this,a=this.state,s=a.showChat,o=a.messageInput,c=a.messages;return e=c&&c.length>0?r.a.createElement(F,{messages:c}):r.a.createElement("div",{className:"messagesContainer__body__start"},"Start conversation"),r.a.createElement(n.Fragment,null,r.a.createElement("section",{className:"chat",onClick:this.toggleShowChat},r.a.createElement("div",{className:"chat__icon"},r.a.createElement(S,{icon:"messenger"})),!s&&this.props.newMessage>0&&r.a.createElement("div",{className:"chat__notif"},this.props.newMessage)),r.a.createElement("div",{className:"chat__messages ".concat(s?"show":"")},r.a.createElement("div",{className:"chat__messages__header"},r.a.createElement(S,{icon:"close",onClick:this.toggleShowChat}),r.a.createElement("span",null,"Open conversation")),r.a.createElement("div",{className:"chat__messages__body"},e,r.a.createElement("div",{ref:function(e){return t.messagesEnd=e}})),r.a.createElement("div",{className:"chat__messages__input"},r.a.createElement(M,{value:o,placeholder:"Write a message",onChange:this.messageChangeHandler}),r.a.createElement(S,{icon:"send",onClick:this.sendMessageHandler}))))}}]),t}(n.Component),B=Object(p.b)((function(e){return{userId:e.auth.userId,userName:e.auth.userName,newMessage:e.notification.newMessage}}),(function(e){return{addNewMessageNotification:function(t){return e(f(t))},resetNewMessageNotification:function(){return e({type:"RESET_NEW_MESSAGE_NOTIFICATION"})}}}))(U),V=(a(127),function(){return r.a.createElement("div",{className:"loader-container"},r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loader__bar"}),r.a.createElement("div",{className:"loader__bar"}),r.a.createElement("div",{className:"loader__bar"}),r.a.createElement("div",{className:"loader__bar"}),r.a.createElement("div",{className:"loader__bar"}),r.a.createElement("div",{className:"loader__ball"})))}),G=(a(128),a(129),a(130),function(e){return e.link?r.a.createElement(c.b,{className:"button button--".concat(e.color,"  ").concat(e.customClass),to:e.link,onClick:e.onClick},e.children):r.a.createElement("button",{className:["button","button--".concat(e.color)].join(" "),onClick:e.onClick,disabled:e.disabled||e.loading,type:e.type},e.loading?"Looading...":e.children)}),Y=(a(131),a(132),a(133),Object(p.b)((function(e){return{currency:e.parameters.currency,quotes:e.parameters.quotes}}))((function(e){var t=e.quotes.USDCAD,a=e.quotes.USDEUR,n=e.currency,s=e.amount;return"USD"===n&&(s/=t),"EUR"===n&&(s=s/t*a),r.a.createElement("div",{className:"amount"},r.a.createElement("span",{className:"amount__value"},Math.ceil(s).toLocaleString())," ",e.showCurrency?r.a.createElement("span",{className:"amount__currency"},n):"")}))),W=function(e){return r.a.createElement("article",{className:"product"},e.children,r.a.createElement("div",{className:"product__imgContainer",onClick:e.requestProductDetails},r.a.createElement("div",{className:"product__imgContainer__hoverLayer"}),r.a.createElement("img",{src:e.mainImg,alt:"main img",className:"product__img"}),r.a.createElement(S,{icon:"search"})),r.a.createElement("div",{className:"product__details"},r.a.createElement("div",{className:"product__details__model"},r.a.createElement("span",null,e.title),r.a.createElement("span",null,e.year)),r.a.createElement("div",{className:"product__details__price"},r.a.createElement(Y,{amount:e.price,showCurrency:!0}))),r.a.createElement("ul",{className:"product__specList"},r.a.createElement("li",{className:"product__specList__item"},r.a.createElement("span",null,e.nbKilometers),r.a.createElement(S,{icon:"road"})),r.a.createElement("li",{className:"product__specList__item"},r.a.createElement("span",null,e.gazol),r.a.createElement(S,{icon:"gas-station"})),r.a.createElement("li",{className:"product__specList__item"},r.a.createElement("span",null,e.transmissionType),r.a.createElement(S,{icon:"gear"}))))},z=Object(p.b)(null,(function(e){return{setProductRequestedData:function(t){return e(h(t))}}}))(Object(d.f)((function(e){var t=e.productsList;return r.a.createElement("ul",{className:"products-list"},t.map((function(t){return r.a.createElement("li",{key:t._id,className:"products-list__item"},r.a.createElement(W,{id:t._id,mainImg:t.general.mainImgUrl,title:t.general.title,brand:t.general.brand,model:t.general.model,year:t.general.year,price:t.general.price,nbKilometers:t.general.nbKilometers,gazol:t.general.gazol,transmissionType:t.general.transmissionType,requestProductDetails:function(){return a=t,e.setProductRequestedData(a),e.history.push("/inventory/".concat(a._id,"?brand=").concat(a.general.brand,"&model=").concat(a.general.model,"&bodyType=").concat(a.general.bodyType,"&price=").concat(a.general.price)),void(e.fetchProductDetailsHandler&&e.fetchProductDetailsHandler(a));var a}}))})))}))),J=r.a.memo((function(e){var t=e.carsHomeInventory,a=e.homeInventoryLimit;return a<t.length&&(t=t.slice(0,a)),r.a.createElement("div",{className:"home-inventory"},r.a.createElement(z,{productsList:t}),r.a.createElement(G,{color:"primary",onClick:function(){return e.history.push("/inventory")}},"Voir plus"))})),K=(a(134),a(135),a(47)),X=a.n(K),$=(a(151),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){var e=this,t=this.props.query,a=this.props.bodyTypeList,n=this.props.brandAndModelsData,s=Object.keys(n),o=[];"all"!==t.bodyType&&(Object.keys(n).forEach((function(e){Object.keys(n[e]).includes(t.bodyType)&&o.push(e)})),s=o);var c=[];return"all"!==t.brand&&("all"===t.bodyType?Object.keys(n[t.brand]).forEach((function(e){c=[].concat(Object(x.a)(c),Object(x.a)(n[t.brand][e]))})):c=[].concat(Object(x.a)(c),Object(x.a)(n[t.brand][t.bodyType]))),r.a.createElement("div",{className:"inventory__controller"},r.a.createElement(j,{value:"all"===t.bodyType?"all body types":t.bodyType,list:[{text:"all body types",value:"all"}].concat(Object(x.a)(a)),selectItemHandler:this.props.selectBodyTypeHandler}),r.a.createElement(j,{value:"all"===t.brand?"all brands":t.brand,list:[{text:"all brands",value:"all"}].concat(Object(x.a)(s)),selectItemHandler:this.props.selectBrandHandler}),r.a.createElement(j,{value:"all"===t.model?"all models":t.model,list:"all"!==t.brand?[{text:"all models",value:"all"}].concat(Object(x.a)(c)):["all models"],selectItemHandler:this.props.selectModelHandler}),t.sort&&r.a.createElement(j,{value:t.sort,list:["increasing price","decreasing price","latest","most popular"],selectItemHandler:this.props.sortHandler}),r.a.createElement("div",{className:"inventory__controller__group"},r.a.createElement("div",{className:"inventory__controller__group__infos"},r.a.createElement("div",{className:"inventory__controller__group__infos__key"},"Price"),r.a.createElement("div",{className:"inventory__controller__group__infos__value"},t.price.value.min," - ",t.price.value.max)),r.a.createElement(X.a,{step:1e3,maxValue:t.price.scope.max,minValue:t.price.scope.min,value:t.price.value,onChange:function(t){return e.props.changePriceHandler(t)},onChangeComplete:this.props.changeComplete})),r.a.createElement("div",{className:"inventory__controller__group"},r.a.createElement("div",{className:"inventory__controller__group__infos"},r.a.createElement("div",{className:"inventory__controller__group__infos__key"},"Year"),r.a.createElement("div",{className:"inventory__controller__group__infos__value"},t.year.value.min," - ",t.year.value.max)),r.a.createElement(X.a,{maxValue:t.year.scope.max,minValue:t.year.scope.min,value:t.year.value,onChange:function(t){return e.props.changeYearHandler(t)},onChangeComplete:this.props.changeComplete})))}}]),t}(n.Component)),Q=Object(p.b)((function(e){return{brandAndModelsData:e.product.brandAndModelsData,price:e.product.price,bodyTypeList:e.product.bodyTypeList}}))($),Z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={query:{brand:"all",model:"all",bodyType:"all",year:{value:{min:2008,max:2020},scope:{min:2008,max:2020}},price:{value:{min:null,max:null},scope:{min:null,max:null}},sort:"increasing price"}},a.selectBodyTypeHandler=function(e){a.setState((function(t){return Object(I.a)({},t,{query:Object(I.a)({},t.query,{bodyType:e})})}))},a.selectBrandHandler=function(e){a.setState((function(t){return Object(I.a)({},t,{query:Object(I.a)({},t.query,{brand:e})})}))},a.selectModelHandler=function(e){a.setState((function(t){return Object(I.a)({},t,{query:Object(I.a)({},t.query,{model:e})})}))},a.changePriceHandler=function(e){a.setState((function(t){return Object(I.a)({},t,{query:Object(I.a)({},t.query,{price:Object(I.a)({},t.query.price,{value:e})})})}))},a.changeYearHandler=function(e){a.setState((function(t){return Object(I.a)({},t,{query:Object(I.a)({},t.query,{year:Object(I.a)({},t.query.year,{value:e})})})}))},a.onChangeComplete=function(){a.searchHandler()},a.searchHandler=function(){var e=a.state.query;a.props.history.push({pathname:"/inventory",search:"sort=".concat(e.sort,"&bodyType=").concat(e.bodyType,"&brand=").concat(e.brand,"&model=").concat(e.model,"&minPrice=").concat(e.price.value.min,"&maxPrice=").concat(e.price.value.max,"&minYear=").concat(e.year.value.min,"&maxYear=").concat(e.year.value.max)})},a}return Object(_.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.price.min,t=this.props.price.max;this.setState((function(a){return Object(I.a)({},a,{query:Object(I.a)({},a.query,{price:{value:{min:e,max:t},scope:{min:e,max:t}}})})}))}},{key:"render",value:function(){var e=this.state.query;return r.a.createElement("div",{className:"home-search"},r.a.createElement(Q,{query:e,selectBrandHandler:this.selectBrandHandler,selectModelHandler:this.selectModelHandler,sortHandler:this.sortHandler,changePriceHandler:this.changePriceHandler,changeYearHandler:this.changeYearHandler,changeComplete:this.changeComplete,selectBodyTypeHandler:this.selectBodyTypeHandler,data:this.props.brandAndModelsData}),r.a.createElement("div",{className:"home-search__cta"},r.a.createElement(G,{color:"primary",onClick:this.searchHandler},"Search")))}}]),t}(n.Component),ee=Object(p.b)((function(e){return{brandAndModelsData:e.product.brandAndModelsData,price:e.product.price}}))(Object(d.f)(Z)),te=(a(152),Object(d.f)((function(e){return r.a.createElement("section",{className:"home-service"},r.a.createElement("h1",{className:"home-service__title"},"Nos offres"),r.a.createElement("ul",{className:"home-service__list"},r.a.createElement("li",{className:"home-service__list__item"},r.a.createElement(S,{icon:"buy"}),r.a.createElement("div",{className:"home-service__list__item__text"},r.a.createElement("h2",{className:"home-service__list__item__text__title"},"Basic"),r.a.createElement("p",{className:"home-service__list__item__text__para"},"Le Lorem Ipsum est simplement du faux texte employ\xe9 dans la composition et la mise en page avant impression."))),r.a.createElement("li",{className:"home-service__list__item"},r.a.createElement(S,{icon:"contract"}),r.a.createElement("div",{className:"home-service__list__item__text"},r.a.createElement("h2",{className:"home-service__list__item__text__title"},"Conventionnel"),r.a.createElement("p",{className:"home-service__list__item__text__para"},"Le Lorem Ipsum est simplement du faux texte employ\xe9 dans la composition et la mise en page avant impression."))),r.a.createElement("li",{className:"home-service__list__item"},r.a.createElement(S,{icon:"yoga"}),r.a.createElement("div",{className:"home-service__list__item__text"},r.a.createElement("h2",{className:"home-service__list__item__text__title"},"Tranquility"),r.a.createElement("p",{className:"home-service__list__item__text__para"},"Le Lorem Ipsum est simplement du faux texte employ\xe9 dans la composition et la mise en page avant impression."))),r.a.createElement("li",{className:"home-service__list__item"},r.a.createElement(S,{icon:"key"}),r.a.createElement("div",{className:"home-service__list__item__text"},r.a.createElement("h2",{className:"home-service__list__item__text__title"},"Cl\xe9s en main"),r.a.createElement("p",{className:"home-service__list__item__text__para"},"Le Lorem Ipsum est simplement du faux texte employ\xe9 dans la composition et la mise en page avant impression.")))),r.a.createElement(G,{color:"primary",onClick:function(){return e.history.push("/services")}},"LEARN MORE"))}))),ae=a(23),ne=(a(153),a(154),function(e){return r.a.createElement("div",{className:"input ".concat(e.className)},"input"===e.control&&r.a.createElement("input",{className:"input__field",type:e.type,id:e.id,required:e.required,value:e.value,placeholder:e.placeholder,autoComplete:e.autoComplete,onChange:function(t){return e.onChange(e.id,t.target.value,e.formType)}}),"textarea"===e.control&&r.a.createElement("textarea",{className:"textarea",id:e.id,required:e.required,value:e.value,onChange:function(t){return e.onChange(e.id,t.target.value)},placeholder:e.placeholder}),"select"===e.control&&r.a.createElement("select",{id:e.id,required:e.required,onChange:function(t){return e.onChange(e.id,t.target.value)},value:e.value},e.options.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),e.label&&r.a.createElement("label",{htmlFor:e.id,className:"input__label"},e.label),e.border&&r.a.createElement("div",{className:"input__border"}))}),re=(a(155),function(e,t,a,n,r){var s=[];return[e,t,a,n,r].forEach((function(e){e&&e.value.length<1&&s.push("".concat(e.errorLabel," is required"))})),/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e.value.trim())||s.push("Please, enter a valid email"),n&&n.value.trim().length<3&&s.push("Firstname should be at least 3 characters long"),r&&r.value.trim().length<3&&s.push("Lastname should be at least 3 characters long"),t.value.trim().length<5&&s.push("Password should be at least 5 characters long"),a&&t.value.trim()!==a.value.trim()&&s.push("Please enter the same password"),s}),se=(a(156),function(e){return o.a.createPortal(r.a.createElement("div",{className:["backdrop",e.open?"open":""].join(" "),onClick:e.onClick},e.children),document.getElementById("backdrop-root"))}),oe=(a(157),function(e){return r.a.createElement("section",{className:"modal"},r.a.createElement("header",{className:"modal__header"},r.a.createElement("h1",null,e.title)),r.a.createElement("div",{className:"modal__body"},e.children),r.a.createElement("div",{className:"modal__cta"},r.a.createElement(G,{onClick:e.onCloseModal,color:"primary"},"OK")))}),ce=function(e){return r.a.createElement(n.Fragment,null,e.error&&r.a.createElement(se,{onClick:e.onCloseError}),e.error&&r.a.createElement(oe,{title:"Oops something went wrong",onCloseModal:e.onCloseError},r.a.createElement("p",null,e.error[0])))},le=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={loginForm:{email:{value:""},password:{value:""}},error:null},a.inputChangeHandler=function(e,t){a.setState((function(a){return{loginForm:Object(I.a)({},a.loginForm,Object(ae.a)({},e,Object(I.a)({},a.loginForm[e],{value:t})))}}))},a.loginHandler=function(e,t){if(e.preventDefault(),a.props.setLoadingToTrue(),t){var n=re(t.email,t.password);if(n.length>0)return a.setState({error:n}),a.props.setLoadingToFalse(),void a.props.setErrors()}var r=L();fetch("https://africauto.herokuapp.com/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email.value,password:t.password.value,timeStamp:r})}).then((function(e){if(422===e.status)throw new Error("validation failed");if(401===e.status)throw new Error("Wrong email or password");if(200!==e.status&&201!==e.status)throw new Error("Could not authenticate you");return e.json()})).then((function(e){y()("https://africauto.herokuapp.com",{query:"data=".concat(e.userId," ").concat(e.connectionId)}).connect(),a.props.loginSucceeded(e),localStorage.setItem("woto-token",e.token),localStorage.setItem("woto-userId",e.userId),localStorage.setItem("woto-userName",e.userName);var t=new Date((new Date).getTime()+864e5);localStorage.setItem("woto-expiryDate",t.toISOString()),a.props.setLoadingToFalse(),a.props.history.push("/my-account/messages")})).catch((function(e){var t=[];t.push(e.message),a.setState({error:t}),a.props.loginFailed(),a.props.setLoadingToFalse(),a.props.setErrors()}))},a.closeErrorHandler=function(){a.setState({error:null}),a.props.resetErrors()},a}return Object(_.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.state.error?r.a.createElement(ce,{error:this.state.error,onCloseError:this.closeErrorHandler}):r.a.createElement("form",{className:"auth__form auth__form--login",onSubmit:function(t){return e.loginHandler(t,e.state.loginForm)},noValidate:!0,autoComplete:"off"},r.a.createElement("ul",{className:"auth__input__list"},r.a.createElement(ne,{type:"email",control:"input",label:"email",id:"email",value:this.state.loginForm.email.value,onChange:this.inputChangeHandler,placeholder:"email",border:!0,required:!0,autoComplete:"new-password"}),r.a.createElement(ne,{type:"password",control:"input",label:"mot de passe",id:"password",value:this.state.loginForm.password.value,onChange:this.inputChangeHandler,placeholder:"mot de passe",border:!0,required:!0,autoComplete:"new-password"})),r.a.createElement("div",{className:"login__options"},r.a.createElement("div",{className:"login__options--1"},"Mot de passe oubli\xe9"),r.a.createElement("div",{className:"login__options--1"},"Pas encore membre ?")),r.a.createElement("div",{className:"auth__button"},r.a.createElement(G,{color:"primary",type:"submit"},"Login")))}}]),t}(n.Component),ie=Object(p.b)(null,(function(e){return{loginSucceeded:function(t){return e(function(e){return{type:"LOGIN_SUCCEDED",token:e.token,userId:e.userId,connectionId:e.connectionId,userName:e.userName}}(t))},loginFailed:function(){return e({type:"LOGIN_FAILED"})}}}))(Object(d.f)(le)),ue=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={loginForm:{email:{value:""},password:{value:""}},error:null},a.inputChangeHandler=function(e,t){a.setState((function(a){return{loginForm:Object(I.a)({},a.loginForm,Object(ae.a)({},e,Object(I.a)({},a.loginForm[e],{value:t})))}}))},a}return Object(_.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"home-contact"},r.a.createElement("h1",{className:"home-contact__title"},"Need some help"),r.a.createElement("p",{className:"home-contact__text"},"Lorem ipsum dolor sit amet. Proin non venenatis turpis. Nulla vitae odio eget justo dapibus faucibus. Maecenas semper elementum augue a ultrices."),r.a.createElement("div",{className:"home-contact__form"},r.a.createElement(ie,null)))}}]),t}(n.Component),me=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={carsHomeIntro:a.props.carsHomeIntro,index:0,initialIndex:0,showIntroList:!1,partRequested:"inventory",homeInventoryLimit:9},a.imageSlideHandler=function(){var e=a.state,t=e.index,n=e.carsHomeIntro;a.inter=setInterval((function(){t===n.length?a.setState({index:0},(function(){clearInterval(a.inter),a.imageSlideHandler()})):a.setState({index:t++})}),3e3)},a.onRequestChange=function(e){clearInterval(a.inter),a.setState({index:e},(function(){return a.imageSlideHandler()}))},a.clearInterval=function(){clearInterval(a.inter)},a.replayInterval=function(){a.imageSlideHandler()},a.showIntroListToggler=function(){a.setState((function(e){return{showIntroList:!e.showIntroList}}))},a.requestProductDetails=function(e){a.props.setProductRequestedData(e),a.props.history.push("/inventory/".concat(e._id,"?brand=").concat(e.general.brand,"&model=").concat(e.general.model,"&bodyType=").concat(e.general.bodyType,"&price=").concat(e.general.price)),a.props.fetchProductDetailsHandler&&a.props.fetchProductDetailsHandler(e)},a}return Object(_.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.innerWidth>1337&&this.setState({homeInventoryLimit:8}),this.props.history.push({pathname:this.props.history.pathname,search:"lang=".concat(this.props.lang,"&currency=").concat(this.props.currency)}),this.imageSlideHandler()}},{key:"componentWillUnmount",value:function(){this.clearInterval(this.inter)}},{key:"render",value:function(){var e=this,t=this.state.carsHomeIntro;return r.a.createElement("div",{className:"home"},r.a.createElement("section",{className:"home__intro"},t.map((function(t,a){return r.a.createElement("div",{className:"home__intro__background \n                                        ".concat(e.state.index===a?"active":"","\n                                        ").concat(0===a?"keyframe":""),key:a},r.a.createElement("img",{src:t.general.mainImgUrl,className:"home__intro__background__image",alt:"home intro"}),r.a.createElement("div",{className:"home__intro__product-container",onMouseEnter:e.clearInterval,onMouseLeave:e.replayInterval},r.a.createElement("div",{className:"home__intro__product"},r.a.createElement("div",{className:"home__intro__product__detail"},r.a.createElement("span",null,t.general.brand),r.a.createElement("span",null,t.general.model),r.a.createElement("span",null,t.general.year)),r.a.createElement("div",{className:"home__intro__product__price"},r.a.createElement(Y,{amount:t.general.price,showCurrency:!0}))),r.a.createElement(G,{color:"primary",onClick:function(){return e.requestProductDetails(t)}},"Voir")))}))),r.a.createElement("section",{className:"home__router"},r.a.createElement("div",{className:"home__router__nav"},r.a.createElement("h1",null,r.a.createElement("span",null,"WELCOME TO\xa0"),r.a.createElement("span",null,"WOTO MOTORS")),r.a.createElement("nav",{className:"home__router__nav__list"},r.a.createElement("li",{className:"home__router__nav__list__item ".concat("inventory"===this.state.partRequested?"active":""),onClick:function(){return e.setState({partRequested:"inventory"})}},"Inventory"),r.a.createElement("li",{className:"home__router__nav__list__item ".concat("search"===this.state.partRequested?"active":""),onClick:function(){return e.setState({partRequested:"search"})}},"Search"),r.a.createElement("li",{className:"home__router__nav__list__item ".concat("services"===this.state.partRequested?"active":""),onClick:function(){return e.setState({partRequested:"services"})}},"Services")),r.a.createElement("div",{className:"home__router__nav__count"},r.a.createElement(S,{icon:"car"}),r.a.createElement("div",null,"Available ",this.props.totalProductsCounter," cars")))),"inventory"===this.state.partRequested&&r.a.createElement(J,{carsHomeInventory:this.props.carsHomeInventory,history:this.props.history,homeInventoryLimit:this.state.homeInventoryLimit}),"search"===this.state.partRequested&&r.a.createElement(ee,null),"services"===this.state.partRequested&&r.a.createElement(te,null),r.a.createElement(ue,null),r.a.createElement("div",{className:"home__mostPopSedan"},r.a.createElement("h1",{className:"home__mostPopSedan__title"},"Most popular sedan"),r.a.createElement(z,{productsList:this.props.mostPopularSedan})))}}]),t}(n.Component),_e=Object(p.b)((function(e){return{mostPopularSedan:e.product.mostPopularSedan,lang:e.parameters.lang,currency:e.parameters.currency,totalProductsCounter:e.product.totalProductsCounter}}),(function(e){return{setProductRequestedData:function(t){return e(h(t))}}}))(me),de=(a(158),a(73)),pe=a.n(de),he=(a(166),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){for(var e=this,t=[],a=1;a<=this.props.lastPage;a++)t.push(a);var n=t.map((function(t){return r.a.createElement("div",{onClick:e.props.onRequestPageNumber.bind(e,t),key:t,id:t,className:["paginator__control",e.props.currentPage===t?"active":" "].join(" ")},t)}));return r.a.createElement("div",{className:"paginator"},this.props.children,this.props.products&&this.props.products.length>0&&r.a.createElement("div",{className:"paginator__controls ".concat(1===this.props.currentPage&&this.props.products.length<this.props.itemsPerPage?"hide":" ")},r.a.createElement("div",{className:"paginator__control\n                                    ".concat(1===this.props.currentPage?"disabled":""),onClick:this.props.onRequestPreviousPage},r.a.createElement(S,{icon:"arrow-left"})),n,r.a.createElement("div",{className:"paginator__control\n                                    ".concat(this.props.currentPage===this.props.lastPage?"disabled":""),onClick:this.props.onRequestNextPage},r.a.createElement(S,{icon:"arrow-right"}))))}}]),t}(n.Component)),ve=function(e,t,a,n){var r,s=n.USDCAD,o=n.USDEUR;return"CAD"===t&&("USD"===a&&(r=e/s),"EUR"===a&&(r=e/s*o),"CAD"===a&&(r=e)),"USD"===t&&("CAD"===a&&(r=e*s),"EUR"===a&&(r=e*o)),"EUR"===t&&("USD"===a&&(r=e/o),"CAD"===a&&(r=e/o*s)),r},ge=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={products:null,loading:!0,query:{brand:"all",model:"all",bodyType:"all",page:1,year:{value:{min:2008,max:2020},scope:{min:2008,max:2020}},price:{value:{min:null,max:null},scope:{min:null,max:null},init:{min:null,max:null}},sort:"increasing price"},lastPage:null},a.fetchProductsHandler=function(){var e,t=a.state.query,n=new URL("https://africauto.herokuapp.com/product/client"),r=t.price.value.min,s=t.price.value.max,o=r,c=s;r=ve(t.price.fullValue.min,a.props.currency,"CAD",a.props.quotes),s=ve(t.price.fullValue.max,a.props.currency,"CAD",a.props.quotes),t&&(e=Object(I.a)({},e,{page:t.page,brand:t.brand,bodyType:t.bodyType,model:t.model,minPrice:Math.floor(r),maxPrice:Math.ceil(s),minYear:t.year.value.min,maxYear:t.year.value.max,sort:t.sort.split(" ").length>0?"".concat(t.sort.split(" ")[0],"_").concat(t.sort.split(" ")[1]):t.sort}),n.search=new URLSearchParams(e).toString()),fetch(n,{headers:{"Content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Error fetching products");return e.json()})).then((function(e){a.setState({products:e.products,loading:!1}),a.props.history.push({pathname:"/inventory",search:"lang=".concat(a.props.lang,"&currency=").concat(a.props.currency,"&sort=").concat(t.sort,"&page=").concat(t.page,"&bodyType=").concat(t.bodyType,"&brand=").concat(t.brand,"&model=").concat(t.model,"&minPrice=").concat(o,"&maxPrice=").concat(c,"&minYear=").concat(t.year.value.min,"&maxYear=").concat(t.year.value.max)})})).catch((function(e){console.log(e)}))},a.selectBodyTypeHandler=function(e){var t,n=a.props.brandAndModelsData,r=a.state.query;t="all"!==r.brand?Object.keys(n[r.brand]).includes(e)?Object(I.a)({},a.state.query,{bodyType:e}):Object(I.a)({},a.state.query,{bodyType:e,brand:"all",model:"all",page:1}):Object(I.a)({},a.state.query,{bodyType:e}),a.setState({query:t},(function(){return a.fetchProductsHandler(t)}))},a.selectBrandHandler=function(e){var t=Object(I.a)({},a.state.query,{brand:e});"all"===e&&(t=Object(I.a)({},t,{model:"all",page:1})),a.setState({query:t},(function(){return a.fetchProductsHandler(t)}))},a.selectModelHandler=function(e){a.setState((function(t){return Object(I.a)({},t,{query:Object(I.a)({},t.query,{model:e})})}),(function(){return a.fetchProductsHandler()}))},a.sortHandler=function(e){a.setState((function(t){return Object(I.a)({},t,{query:Object(I.a)({},t.query,{sort:e,page:1})})}),(function(){return a.fetchProductsHandler()}))},a.changePriceHandler=function(e){a.setState((function(t){return Object(I.a)({},t,{query:Object(I.a)({},t.query,{page:1,price:Object(I.a)({},t.query.price,{value:e,fullValue:e})})})}))},a.changeYearHandler=function(e){a.setState((function(t){return Object(I.a)({},t,{query:Object(I.a)({},t.query,{page:1,year:Object(I.a)({},t.query.year,{value:e})})})}))},a.changeComplete=function(){a.fetchProductsHandler()},a.paginationHandler=function(e){var t=a.state.query;"next"===e&&a.props.currentInventoryPage<a.state.lastPage&&(t=Object(I.a)({},t,{page:a.props.currentInventoryPage+1}),a.props.setInventoryCurrentPage(a.props.currentInventoryPage+1),a.setState({query:t},(function(){return a.fetchProductsHandler()}))),"previous"===e&&a.props.currentInventoryPage>1&&(t=Object(I.a)({},t,{page:a.props.currentInventoryPage-1}),a.props.setInventoryCurrentPage(a.props.currentInventoryPage-1),a.setState({query:t},(function(){return a.fetchProductsHandler()}))),"previous"!==e&&"next"!==e&&(t=Object(I.a)({},t,{page:e}),a.props.setInventoryCurrentPage(e),a.setState({query:t},(function(){return a.fetchProductsHandler()})))},a}return Object(_.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.price.min,a=this.props.price.max,n=pe.a.parse(this.props.location.search);Object.keys(n).length>2?this.setState((function(r){return Object(I.a)({},r,{query:Object(I.a)({},r.query,{price:{init:{min:t,max:a},scope:{min:t,max:a},value:{min:parseInt(n.minPrice),max:parseInt(n.maxPrice)},fullValue:{min:parseInt(n.minPrice),max:parseInt(n.maxPrice)}},year:Object(I.a)({},r.query.year,{value:{min:parseInt(n.minYear),max:parseInt(n.maxYear)}}),brand:n.brand,model:n.model,sort:n.sort,bodyType:n.bodyType,page:n.page}),lastPage:Math.ceil(e.props.totalProductsCounter/e.props.itemsPerPage)})}),(function(){return e.fetchProductsHandler()})):this.setState((function(n){return Object(I.a)({},n,{query:Object(I.a)({},n.query,{price:{init:{min:t,max:a},scope:{min:t,max:a},value:{min:t,max:a},fullValue:{min:t,max:a}}}),lastPage:Math.ceil(e.props.totalProductsCounter/e.props.itemsPerPage)})}),(function(){return e.fetchProductsHandler()}))}},{key:"componentDidUpdate",value:function(e){var t=this,a=e.currency,n=this.props.currency,r=this.state.query;if(a!==n){var s=this.props.quotes;this.setState((function(e){return Object(I.a)({},e,{query:Object(I.a)({},e.query,{price:Object(I.a)({},e.query.price,{scope:{min:1e3*Math.floor(ve(r.price.init.min,"CAD",n,s)/1e3),max:1e3*Math.ceil(ve(r.price.init.max,"CAD",n,s)/1e3)},value:{min:1e3*Math.floor(ve(r.price.init.min,"CAD",n,s)/1e3),max:1e3*Math.ceil(ve(r.price.init.max,"CAD",n,s)/1e3)},fullValue:{min:ve(r.price.init.min,"CAD",n,s),max:ve(r.price.init.max,"CAD",n,s)}})})})}),(function(){return t.fetchProductsHandler()}))}}},{key:"render",value:function(){var e=this.state,t=e.products,a=e.loading,n=e.query,s=r.a.createElement(V,null);return a||(s=r.a.createElement("div",{className:"inventory"},r.a.createElement(Q,{currency:this.props.currency,query:n,selectBrandHandler:this.selectBrandHandler,selectModelHandler:this.selectModelHandler,selectBodyTypeHandler:this.selectBodyTypeHandler,sortHandler:this.sortHandler,changePriceHandler:this.changePriceHandler,changeYearHandler:this.changeYearHandler,changeComplete:this.changeComplete,data:this.props.brandAndModelsData}),r.a.createElement("section",{className:"inventory__container"},t&&r.a.createElement(he,{onRequestPreviousPage:this.paginationHandler.bind(this,"previous"),onRequestNextPage:this.paginationHandler.bind(this,"next"),lastPage:Math.ceil(this.props.totalProductsCounter/this.props.itemsPerPage),currentPage:this.props.currentInventoryPage,onRequestPageNumber:this.paginationHandler,products:t,itemsPerPage:this.props.itemsPerPage},r.a.createElement(z,{productsList:t}))))),s}}]),t}(n.Component),fe=Object(p.b)((function(e){return{brandAndModelsData:e.product.brandAndModelsData,price:e.product.price,totalProductsCounter:e.product.totalProductsCounter,currentInventoryPage:e.product.currentInventoryPage,itemsPerPage:e.product.itemsPerPage,currency:e.parameters.currency,quotes:e.parameters.quotes,lang:e.parameters.lang}}),(function(e){return{setInventoryCurrentPage:function(t){return e({type:"SET_INVENTORY_CURRENT_PAGE",currentPage:t})}}}))(ge),Ee=a(19),ye=(a(167),a(194)),be=(a(168),function(e){var t=e.product;return r.a.createElement("div",{className:"overview"},r.a.createElement("section",{className:"overview__section"},r.a.createElement("div",{className:"overview__title"},r.a.createElement(S,{icon:"file"}),r.a.createElement("div",null,"General")),r.a.createElement("ul",{className:"overview__list"},r.a.createElement("li",{className:"overview__list__item"},r.a.createElement("div",{className:"overview__list__item__key"},"Brand"),r.a.createElement("div",{className:"overview__list__item__value"},t.general.brand)),r.a.createElement("li",{className:"overview__list__item"},r.a.createElement("div",{className:"overview__list__item__key"},"Model"),r.a.createElement("div",{className:"overview__list__item__value"},t.general.model)),r.a.createElement("li",{className:"overview__list__item"},r.a.createElement("div",{className:"overview__list__item__key"},"Body Type"),r.a.createElement("div",{className:"overview__list__item__value"},t.general.bodyType)),r.a.createElement("li",{className:"overview__list__item"},r.a.createElement("div",{className:"overview__list__item__key"},"Year"),r.a.createElement("div",{className:"overview__list__item__value"},t.general.year)),r.a.createElement("li",{className:"overview__list__item"},r.a.createElement("div",{className:"overview__list__item__key"},"Kilometer"),r.a.createElement("div",{className:"overview__list__item__value"},t.general.nbKilometers.toLocaleString()," km")),r.a.createElement("li",{className:"overview__list__item"},r.a.createElement("div",{className:"overview__list__item__key"},"Year of release"),r.a.createElement("div",{className:"overview__list__item__value"},t.general.yearOfRelease)),r.a.createElement("li",{className:"overview__list__item"},r.a.createElement("div",{className:"overview__list__item__key"},"Serial number"),r.a.createElement("div",{className:"overview__list__item__value"},t.general.serialNumber)))),r.a.createElement("section",{className:"overview__section"},r.a.createElement("div",{className:"overview__title"},r.a.createElement(S,{icon:"design"}),r.a.createElement("div",null,"Design")),r.a.createElement("ul",{className:"overview__list"},r.a.createElement("li",{className:"overview__list__item"},r.a.createElement("div",{className:"overview__list__item__key"},"Interior color"),r.a.createElement("div",{className:"overview__list__item__value"},t.design.intColor)),r.a.createElement("li",{className:"overview__list__item"},r.a.createElement("div",{className:"overview__list__item__key"},"Exterior color"),r.a.createElement("div",{className:"overview__list__item__value"},t.design.extColor)))))}),Ne=(a(169),function(e){var t=e.product;return r.a.createElement("div",{className:"technical"},r.a.createElement("div",{className:"technical__section"},r.a.createElement("div",{className:"technical__title"},r.a.createElement(S,{icon:"engine"}),r.a.createElement("div",null,"Engine")),r.a.createElement("ul",{className:"technical__section__list"},r.a.createElement("li",{className:"technical__section__list__item"},r.a.createElement("span",{className:"technical__section__list__item__detail"},"Motor size"),r.a.createElement("span",{className:"technical__section__list__item__value"},t.tech.motorSize)),r.a.createElement("li",{className:"technical__section__list__item"},r.a.createElement("span",{className:"technical__section__list__item__detail"},"Number of cylinders"),r.a.createElement("span",{className:"technical__section__list__item__value"},t.tech.nbCylinders)),r.a.createElement("li",{className:"technical__section__list__item"},r.a.createElement("span",{className:"technical__section__list__item__detail"},"Fuel"),r.a.createElement("span",{className:"technical__section__list__item__value"},t.general.gazol)),r.a.createElement("li",{className:"technical__section__list__item"},r.a.createElement("span",{className:"technical__section__list__item__detail"},"Max speed"),r.a.createElement("span",{className:"technical__section__list__item__value"},t.tech.maxSpeed," km/h")))),r.a.createElement("div",{className:"technical__section"},r.a.createElement("div",{className:"technical__title"},r.a.createElement(S,{icon:"gear"}),r.a.createElement("div",null,"Transmission")),r.a.createElement("ul",{className:"technical__section__list"},r.a.createElement("li",{className:"technical__section__list__item"},r.a.createElement("span",{className:"technical__section__list__item__detail"},"Gear box"),r.a.createElement("span",{className:"technical__section__list__item__value"},t.general.transmissionType)),r.a.createElement("li",{className:"technical__section__list__item"},r.a.createElement("span",{className:"technical__section__list__item__detail"},"Number of gear ratios"),r.a.createElement("span",{className:"technical__section__list__item__value"},t.tech.nbGearRatios)))))}),Ce=(a(170),function(e){var t=e.product;return r.a.createElement("div",{className:"features"},r.a.createElement("ul",{className:"features__list"},t.features.map((function(e){return r.a.createElement("li",{className:"features__list__item"},r.a.createElement(S,{icon:"arrow-list"}),e)}))))}),Oe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).imageSlideHandler=function(){var e=a.state,t=e.index,n=e.images,r=e.initiatlIndex;a.inter=setInterval((function(){t===n.length?a.setState({index:r},(function(){clearInterval(a.inter),a.imageSlideHandler()})):a.setState({index:t++})}),2500)},a.changeGalleryImgIndex=function(e){var t=a.state.product.imageUrls.indexOf("".concat(e));a.setState({index:t})},a.fetchProductDetailsHandler=function(e){var t,n,r,s,o,c,l=a.props,i=l.productRequested,u=l.userId;if(t=null===u?"not connected":u,i)n=i.general.brand,r=i.general.model,s=i.general.price,c=i.general.bodyType,o=i._id;else{var m=a.props.location.search,_=new URLSearchParams(m);n=_.get("brand"),r=_.get("model"),s=_.get("price"),c=_.get("bodyType"),o=a.props.match.params.prodId}e&&(o=e._id,n=e.general.brand,r=e.general.model,s=e.general.price,c=e.general.bodyType);var d="https://africauto.herokuapp.com/product/".concat(o,"?userId=").concat(t,"&brand=").concat(n,"&model=").concat(r,"&bodyType=").concat(c,"&price=").concat(s);fetch(d,{headers:{"Content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Error fetching products");return e.json()})).then((function(e){var t,n=e.product,r=a.props.userFavorites,s=[];r.forEach((function(e){return s.push(e._id)})),t=!!s.includes(n._id),window.scrollTo(0,0),a.setState({product:e.product,relatedProducts:e.relatedProducts,favorite:t,loading:!1})})).catch((function(e){console.log(e)}))},a.favoriteHandler=function(){var e,t,n=a.props.productId;e=n||a.props.match.params.prodId,a.state.favorite?(t="https://africauto.herokuapp.com/user/remove-favorite/"+a.props.userId+"?prodId=".concat(e),a.props.removeUserFavoriteProduct(a.state.product)):(t="https://africauto.herokuapp.com/user/add-favorite/"+a.props.userId+"?prodId=".concat(e),a.props.addUserFavoriteProduct(a.state.product));fetch(t,{headers:{"Content-type":"application/json"},method:"POST"}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Error handling favorites product");return e.json()})).then((function(e){a.setState((function(e){return Object(I.a)({},e,{favorite:!e.favorite})}))})).catch((function(e){console.log(e)}))},a.requestProductDetails=function(e){a.fetchProductDetailsHandler(e)},a.showFullGalleryHandler=function(){a.props.hideScrollBarHandler()},a.state={index:0,product:null,relatedProducts:[],initiatlIndex:0,loading:!0,partRequested:"overview",favorite:!1},a.escFunction=a.escFunction.bind(Object(Ee.a)(a)),a}return Object(_.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchProductDetailsHandler(),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){clearInterval(this.inter),document.removeEventListener("keydown",this.escFunction,!1)}},{key:"escFunction",value:function(e){27===e.keyCode&&this.props.hideScrollBar&&this.props.showScrollBarHandler()}},{key:"render",value:function(){var e=this,t=this.state.product,a=this.state.relatedProducts;return this.state.loading?r.a.createElement(V,null):r.a.createElement("div",{className:"single-car"},r.a.createElement("div",{className:"single-car__header"},r.a.createElement("div",{className:"single-car__header__main"},r.a.createElement("div",{className:"single-car__header__main__titleContainer"},r.a.createElement("h1",{className:"single-car__header__main__title"},t.general.title," ",t.general.year),this.props.userId&&r.a.createElement("div",{className:"single-car__header__main__favoriteButton ".concat(this.state.favorite?"active":""),onClick:this.favoriteHandler},this.state.favorite?"Retirer des favoris":"Ajouter aux favoris")),r.a.createElement("div",{className:"single-car__header__main__gallery"},r.a.createElement(ye.a,{index:this.state.index,onRequestChange:function(t){return e.setState({index:t})}},t.imageUrls.map((function(t){return r.a.createElement(ye.b,{objectFit:"cover",key:t,src:t,onClick:e.props.hideScrollBarHandler})})))),this.props.hideScrollBar&&r.a.createElement("div",{className:"single-car__header__main__gallery--fullContainer"},r.a.createElement("div",{className:"single-car__header__main__gallery--fullContainer__closeBtn",onClick:this.props.showScrollBarHandler},r.a.createElement(S,{icon:"close"})),r.a.createElement("div",{className:"single-car__header__main__gallery--full"},r.a.createElement(ye.a,{index:this.state.index,onRequestChange:function(t){return e.setState({index:t})}},t.imageUrls.map((function(e){return r.a.createElement(ye.b,{objectFit:"contain",key:e,src:e})}))))),r.a.createElement("div",{className:"single-car__header__main__gallery__controller"},t.imageUrls.map((function(t){return r.a.createElement("img",{src:t,alt:"car",key:t,className:"single-car__header__main__gallery__controller__img",onClick:function(){return e.changeGalleryImgIndex(t)}})})))),r.a.createElement("div",{className:"single-car__header__info"},r.a.createElement("div",{className:"single-car__header__info__priceContainer"},r.a.createElement("div",{className:"single-car__header__info__price"}," ",r.a.createElement(Y,{amount:t.general.price,showCurrency:!0}))),r.a.createElement("ul",{className:"single-car__header__info__list"},r.a.createElement("li",{className:"single-car__header__info__list__item"},r.a.createElement("div",{className:"single-car__header__info__list__item__key"},"reference"),r.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.supplier.reference)),r.a.createElement("li",{className:"single-car__header__info__list__item"},r.a.createElement("div",{className:"single-car__header__info__list__item__key"},"brand"),r.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.brand)),r.a.createElement("li",{className:"single-car__header__info__list__item"},r.a.createElement("div",{className:"single-car__header__info__list__item__key"},"body type"),r.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.bodyType)),r.a.createElement("li",{className:"single-car__header__info__list__item"},r.a.createElement("div",{className:"single-car__header__info__list__item__key"},"model"),r.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.model)),r.a.createElement("li",{className:"single-car__header__info__list__item"},r.a.createElement("div",{className:"single-car__header__info__list__item__key"},"year"),r.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.year)),r.a.createElement("li",{className:"single-car__header__info__list__item"},r.a.createElement("div",{className:"single-car__header__info__list__item__key"},"kilometer"),r.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.nbKilometers," km")),r.a.createElement("li",{className:"single-car__header__info__list__item"},r.a.createElement("div",{className:"single-car__header__info__list__item__key"},"YOR"),r.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.yearOfRelease)),r.a.createElement("li",{className:"single-car__header__info__list__item"},r.a.createElement("div",{className:"single-car__header__info__list__item__key"},"fuel"),r.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.gazol)),r.a.createElement("li",{className:"single-car__header__info__list__item"},r.a.createElement("div",{className:"single-car__header__info__list__item__key"},"gear box"),r.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.transmissionType)),r.a.createElement("li",{className:"single-car__header__info__list__item"},r.a.createElement("div",{className:"single-car__header__info__list__item__key"},"serial number"),r.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.serialNumber)),r.a.createElement("li",{className:"single-car__header__info__list__item"},r.a.createElement("div",{className:"single-car__header__info__list__item__key"},"views"),r.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.general.viewCounter?t.general.viewCounter:"-")),r.a.createElement("li",{className:"single-car__header__info__list__item"},r.a.createElement("div",{className:"single-car__header__info__list__item__key"},"followers"),r.a.createElement("div",{className:"single-car__header__info__list__item__value"},t.followersCounter?t.followersCounter:"-"))))),r.a.createElement("section",{className:"single-car__details"},r.a.createElement("ul",{className:"single-car__details__nav"},r.a.createElement("li",{className:"single-car__details__nav__item\n                                        ".concat("overview"===this.state.partRequested?"active":""),onClick:function(){return e.setState({partRequested:"overview"})}},"Overview"),r.a.createElement("li",{className:"single-car__details__nav__item\n                                        ".concat("technical"===this.state.partRequested?"active":""),onClick:function(){return e.setState({partRequested:"technical"})}},"Technical"),r.a.createElement("li",{className:"single-car__details__nav__item\n                                        ".concat("features"===this.state.partRequested?"active":""),onClick:function(){return e.setState({partRequested:"features"})}},"Features")),"overview"===this.state.partRequested&&r.a.createElement(be,{product:t}),"technical"===this.state.partRequested&&r.a.createElement(Ne,{product:t}),"features"===this.state.partRequested&&r.a.createElement(Ce,{product:t})),r.a.createElement("section",{className:"single-car__related"},r.a.createElement("h2",{className:"single-car__section__title"},"Similar vehicles"),r.a.createElement(z,{productsList:a,fetchProductDetailsHandler:this.fetchProductDetailsHandler})),r.a.createElement("section",{className:"single-car__mostPopular"},r.a.createElement("h2",{className:"single-car__section__title"},"Most popular"),r.a.createElement(z,{productsList:this.props.mostPopularProducts,fetchProductDetailsHandler:this.fetchProductDetailsHandler})))}}]),t}(n.Component),we=Object(p.b)((function(e){return{productRequested:e.product.productRequested,mostPopularProducts:e.product.mostPopularProducts,userId:e.auth.userId,userFavorites:e.user.favorites}}),(function(e){return{setProductRequestedData:function(t){return e(h(t))},addUserFavoriteProduct:function(t){return e(function(e){return{type:"ADD_USER_FAVORITE_PRODUCT",product:e}}(t))},removeUserFavoriteProduct:function(t){return e(function(e){return{type:"REMOVE_USER_FAVORITE_PRODUCT",product:e}}(t))}}}))(Oe),Se=(a(178),a(179),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={signupForm:{firstName:{value:"",errorLabel:"A firstname"},lastName:{value:"",errorLabel:"A lastname"},userEmail:{value:"",errorLabel:"An email"},userPassword:{value:"",errorLabel:"A password"},confirm_password:{value:"",errorLabel:"A confirmation password"}},error:null},a.inputChangeHandler=function(e,t){a.setState((function(a){return{signupForm:Object(I.a)({},a.signupForm,Object(ae.a)({},e,Object(I.a)({},a.signupForm[e],{value:t})))}}))},a.submitHandler=function(e,t){e.preventDefault(),a.props.setLoadingToTrue();var n=re(t.userEmail,t.userPassword,t.confirm_password,t.firstName,t.lastName);if(n.length>0)return a.setState({error:n}),a.props.setLoadingToFalse(),void a.props.setErrors();var r=new FormData;r.append("firstName",t.firstName.value),r.append("lastName",t.lastName.value),r.append("email",t.userEmail.value),r.append("password",t.userPassword.value),fetch("https://africauto.herokuapp.com/auth/signup",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(r))}).then((function(e){if(422===e.status)throw new Error("Make sure the email isn't used yet");if(200!==e.status&&201!==e.status)throw new Error(" Creating a user failed");return e.json()})).then((function(e){a.props.setLoadingToFalse(),a.props.requestLoginForm()})).catch((function(e){var t=[];t.push(e.message),a.props.setLoadingToFalse(),a.props.setErrors(),a.setState({error:t})}))},a.closeErrorHandler=function(){a.setState({error:null}),a.props.resetErrors()},a}return Object(_.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.state.error?r.a.createElement(ce,{error:this.state.error,onCloseError:this.closeErrorHandler}):r.a.createElement("form",{className:"auth__form auth__form--signup",onSubmit:function(t){return e.submitHandler(t,e.state.signupForm)},autoComplete:"off",noValidate:!0},r.a.createElement("ul",{className:"auth__input__list"},r.a.createElement(ne,{type:"text",control:"input",id:"firstName",value:this.state.signupForm.firstName.value,label:"pr\xe9nom",onChange:this.inputChangeHandler,placeholder:"pr\xe9nom",border:!0,required:!0}),r.a.createElement(ne,{type:"text",control:"input",label:"nom",id:"lastName",value:this.state.signupForm.lastName.value,onChange:this.inputChangeHandler,placeholder:"nom",border:!0,required:!0}),r.a.createElement(ne,{type:"email",control:"input",label:"email",id:"userEmail",value:this.state.signupForm.userEmail.value,onChange:this.inputChangeHandler,placeholder:"email",border:!0,required:!0}),r.a.createElement(ne,{type:"password",control:"input",label:"mot de passe",id:"userPassword",value:this.state.signupForm.userPassword.value,onChange:this.inputChangeHandler,placeholder:"mot de passe",border:!0,autoComplete:"new-password",required:!0}),r.a.createElement(ne,{id:"confirm_password",label:"confirmer mot de passe",placeholder:"confirmer mot de passe",type:"password",control:"input",required:!0,border:!0,value:this.state.signupForm.confirm_password.value,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"signup__options"},r.a.createElement("div",{className:"signup__options--1"},"D\xe9j\xe0 un compte ?")),r.a.createElement("div",{className:"auth__button"},r.a.createElement(G,{color:"primary",type:"submit"},"Sign up")))}}]),t}(n.Component)),Ie=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={requestedForm:"signup",loading:!1,error:!1},a.setRequestedForm=function(e){a.setState({requestedForm:e})},a.setLoadingToTrue=function(){a.setState({loading:!0})},a.setLoadingToFalse=function(){a.setState({loading:!1})},a.setErrors=function(){a.setState({error:!0})},a.resetErrors=function(){a.setState({error:!1})},a}return Object(_.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,!0===this.state.loading&&r.a.createElement(V,null),r.a.createElement("section",{className:"auth"},r.a.createElement("div",{className:"auth__container"},!1===this.state.error&&r.a.createElement("div",{className:"auth__controller"},r.a.createElement("div",{className:"auth__controller__button \n                                                ".concat("signup"===this.state.requestedForm?"active":""),onClick:function(){return e.setRequestedForm("signup")}},"Signup"),r.a.createElement("div",{className:"auth__controller__button \n                                                ".concat("login"===this.state.requestedForm?"active":""),onClick:function(){return e.setRequestedForm("login")}},"Login")),"signup"===this.state.requestedForm&&r.a.createElement(Se,{setLoadingToTrue:this.setLoadingToTrue,setLoadingToFalse:this.setLoadingToFalse,setErrors:this.setErrors,resetErrors:this.resetErrors,requestLoginForm:function(){return e.setRequestedForm("login")}}),"login"===this.state.requestedForm&&r.a.createElement(ie,{setLoadingToTrue:this.setLoadingToTrue,setLoadingToFalse:this.setLoadingToFalse,setErrors:this.setErrors,resetErrors:this.resetErrors}))))}}]),t}(n.Component),je=(a(180),a(181),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={messages:null,messageInput:""},a.readNewMessagesHandler=function(){var e="https://africauto.herokuapp.com/messages/"+a.props.userId,t=L();fetch(e,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({timeStamp:t,userName:a.props.userName.split(" ")[0]})}).then((function(e){if(200!==e.status)throw new Error("Failed to fetch messages");return e.json()})).then((function(e){console.log("resdata",e)})).catch((function(e){console.log(e)}))},a.addMessages=function(e){var t=[].concat(Object(x.a)(a.state.messages),[e]);a.setState({messages:t},(function(){return a.scrollToBottom()}))},a.messageChangeHandler=function(e){a.setState({messageInput:e})},a.sendMessageHandler=function(){if(""!==a.state.messageInput){var e=L(),t="https://africauto.herokuapp.com/messages/user/"+a.props.userId;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:a.props.userName.split(" ")[0],message:a.state.messageInput,timeStamp:e})}).then((function(e){return e.json()})).then((function(e){a.addMessages(e.data),a.setState({messageInput:""},(function(){return a.scrollToBottom()}))})).catch((function(e){console.log(e)}))}},a}return Object(_.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t="https://africauto.herokuapp.com/messages/"+this.props.userId;fetch(t,{headers:{"Content-Type":"application/json"},method:"GET"}).then((function(e){if(200!==e.status)throw new Error("Failed to fetch messages");return e.json()})).then((function(t){console.log(t),e.props.newMessage>0&&(e.props.resetNewMessageNotification(),e.readNewMessagesHandler()),e.setState({messages:t.messages.messages},(function(){return e.scrollToBottom()}))})).catch((function(e){console.log(e)})),y()("https://africauto.herokuapp.com").on("adminSentMessage",(function(t){e.props.userId===t.messageData.userId&&(e.readNewMessagesHandler(),e.addMessages(t.messageData))}))}},{key:"scrollToBottom",value:function(){this.messagesEnd.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.messages,s=a.messageInput;return e=n&&n.length>0?r.a.createElement(F,{messages:n}):r.a.createElement("div",{className:"messagesContainer__body__start"},"Start conversation"),r.a.createElement("div",{className:"messages"},r.a.createElement("div",{className:"messages__body"},e,r.a.createElement("div",{ref:function(e){t.messagesEnd=e}})),r.a.createElement("div",{className:"messages__sender"},r.a.createElement("div",{className:"messages__sender__textareaContainer"},r.a.createElement(M,{value:s,placeholder:"message",onChange:this.messageChangeHandler,className:"messages__sender__textarea"}),r.a.createElement(S,{icon:"send",onClick:this.sendMessageHandler,customClass:"messages__sender__sender-btn"}))))}}]),t}(n.Component)),Te=Object(p.b)((function(e){return{userId:e.auth.userId,userName:e.auth.userName,newMessage:e.notification.newMessage}}),(function(e){return{addNewMessageNotification:function(t){return e(f(t))},resetNewMessageNotification:function(){return e({type:"RESET_NEW_MESSAGE_NOTIFICATION"})}}}))(je),Pe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,scrolling:!1},a.requestProductDetails=function(e){a.props.setProductRequestedData(e),a.props.history.push("/car/".concat(e.productId))},a}return Object(_.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){"/my-account/messages"!==this.props.location.pathname?this.setState({scrolling:!0}):this.setState({scrolling:!1})}},{key:"componentDidUpdate",value:function(e){e.location.pathname!==this.props.location.pathname&&("/my-account/messages"===this.props.location.pathname?this.setState({scrolling:!1}):this.setState({scrolling:!0}))}},{key:"render",value:function(){var e=this.props.favorites,t=this.state.scrolling;return r.a.createElement("div",{className:"account"},r.a.createElement("div",{className:"account__sidebar"},r.a.createElement("ul",{className:"account__sidebar__list"},r.a.createElement(c.c,{to:"/my-account/messages",className:"account__sidebar__list__item"},r.a.createElement(S,{icon:"email"}),r.a.createElement("span",null,"Messages")),r.a.createElement(c.c,{to:"/my-account/favorites",className:"account__sidebar__list__item"},r.a.createElement(S,{icon:"heart"}),r.a.createElement("span",null,"Favorites"))),r.a.createElement("div",{className:"account__sidebar__logout",onClick:this.props.logoutHandler},r.a.createElement("span",null,"Logout"))),r.a.createElement("div",{className:"account__currentSection ".concat(t?"scroll":"")},r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/my-account/favorites",render:function(t){return r.a.createElement(z,Object.assign({},t,{productsList:e}))}}),r.a.createElement(d.a,{path:"/my-account/messages",component:Te}))))}}]),t}(n.Component),ke=Object(p.b)((function(e){return{userId:e.auth.userId,favorites:e.user.favorites}}),(function(e){return{setProductRequestedData:function(t){return e(h(t))}}}))(Object(d.f)(Pe)),He=(a(182),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.props.history.push({pathname:this.props.history.pathname,search:"lang=".concat(this.props.lang,"&currency=").concat(this.props.currency)})}},{key:"render",value:function(){var e={purchase:["basic","conventionnel","tranquility","cl\xe9s en main"],vehicle_paper:["basic","conventionnel","tranquility","cl\xe9s en main"],transport:["conventionnel","tranquility","cl\xe9s en main"],customs_clearance:["conventionnel","tranquility","cl\xe9s en main"],insurance:["tranquility","cl\xe9s en main"]},t=["basic","conventionnel","tranquility","cl\xe9s en main"];return r.a.createElement("div",{className:"services"},r.a.createElement("header",{className:"services__header"},r.a.createElement("h1",{className:"services__header__title"},"Your next car is here"),r.a.createElement("div",{className:"services__header__text"},"Maecenas iaculis diam ac orci fringilla, rutrum congue nunc bibendum. Duis egestas orci non justo pharetra commodo. Fusce augue nisi, varius id orci at, porttitor gravida tellus. Proin condimentum justo sapien, sed aliquet libero tincidunt commodo. Proin euismod nulla erat, sed hendrerit erat congue eu. Ut dolor odio, feugiat non neque ut, euismod bibendum leo. Duis tempus volutpat efficitur. Praesent fringilla enim tellus, sed semper ligula feugiat nec.")),r.a.createElement("table",{className:"services__table"},r.a.createElement("thead",{className:"services__table__header"},r.a.createElement("tr",null,r.a.createElement("th",null,"\xa0"),t.map((function(e,t){return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",{className:"services__table__data"},Object.keys(e).map((function(a,n){return r.a.createElement("tr",{key:n,className:"services__table__data__row"},r.a.createElement("td",null,a.split("_").length>1?"".concat(a.split("_")[0]," ").concat(a.split("_")[1]):a),t.map((function(t,n){return e[a].includes(t)?r.a.createElement("td",{className:"services__table__data__row__checked",key:n},r.a.createElement(S,{icon:"checkmark"})):r.a.createElement("td",{className:"services__table__data__row__unchecked",key:n},r.a.createElement(S,{icon:"cross"}))})))})))))}}]),t}(n.Component)),De=Object(p.b)((function(e){return{lang:e.parameters.lang,currency:e.parameters.currency}}))(He),qe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={carsHomeIntro:[],carsHomeInventory:[],loading:!1,hideScrollBar:!1,hideFooter:!1,scrolled:!1,scrollDirection:"bottom"},a.listenToScroll=function(){var e=document.body.scrollTop||document.documentElement.scrollTop,t=e<50;!t&&a.scrollPos>e&&(a.scrollPos=e,a.setState({scrolled:!0,scrollDirection:"top"})),!t&&a.scrollPos<e&&(a.scrollPos=e,a.setState({scrolled:!0,scrollDirection:"bottom"})),t&&(a.scrollPos=e,a.setState({scrolled:!1}))},a.initAppDataHandler=function(){fetch("https://africauto.herokuapp.com/product/init",{method:"GET",headers:{"Content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Error fetching products");return e.json()})).then((function(e){a.props.initAppData(e),a.setState({carsHomeIntro:e.publicityProducts,carsHomeInventory:e.homeInventoryProducts,loading:!1})})).catch((function(e){console.log(e)}))},a.startConnection=function(e,t){fetch("https://africauto.herokuapp.com/auth/start-connection",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({userId:e,timeStamp:t})}).then((function(e){if(401===e.status)throw new Error("UserId not valid");if(200!==e.status&&201!==e.status)throw new Error("Could not update last connection");return e.json()})).then((function(t){y()("https://africauto.herokuapp.com/",{query:"data=".concat(e," ").concat(t.connectionId)}).connect(),a.props.setConnectionId(t.connectionId)})).catch((function(e){console.log(e)}))},a.logoutHandler=function(){a.props.setLoginStateToFalse();var e=L(),t=localStorage.getItem("woto-userId"),n=a.props.connectionId;a.endConnection(t,n,e,!0),a.props.history.push("/")},a.endConnection=function(e,t,a,n){fetch("https://africauto.herokuapp.com/auth/end-connection",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({userId:e,connectionId:t,timeStamp:a})}).then((function(e){if(401===e.status)throw new Error("UserId not valid");if(200!==e.status&&201!==e.status)throw new Error("Could not update last connection")})).then((function(){localStorage.removeItem("woto-connectionId"),!0===n&&(localStorage.removeItem("woto-token"),localStorage.removeItem("woto-expiryDate"),localStorage.removeItem("woto-userId"),localStorage.removeItem("woto-userName"))})).catch((function(e){console.log(e)}))},a.initUserFavoriteProducts=function(e){fetch("https://africauto.herokuapp.com/user/favorites/"+e,{headers:{"Content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Error fetching products");return e.json()})).then((function(e){a.props.setUserFavoriteProducts(e.favorites)})).catch((function(e){console.log(e)}))},a.showScrollBarHandler=function(){a.setState({hideScrollBar:!1},(function(){return document.body.className=""}))},a.hideScrollBarHandler=function(){a.setState({hideScrollBar:!0},(function(){return document.body.className="hideScrollBar"}))},a.playNotificationSound=function(){a.player.play()},a}return Object(_.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.listenToScroll),this.scrollPos=0,this.scrollDirection="bottom",this.props.history.push({pathname:this.props.history.pathname,search:"lang=".concat(this.props.lang,"&currency=").concat(this.props.currency)}),this.setState({loading:!0}),this.initAppDataHandler();var e=localStorage.getItem("woto-token"),t=localStorage.getItem("woto-expiryDate"),a=localStorage.getItem("woto-userId"),n=localStorage.getItem("woto-userName");if(e&&t){if(new Date(t)<=new Date)return console.log("Token not valid anymore"),void this.props.setLoginStateToFalse();this.props.location.pathname.includes("/my-account")&&this.setState({hideFooter:!0});var r={isAuth:!0,token:e,userId:a,userName:n};this.props.setLoginStateToTrue(r),this.initUserFavoriteProducts(r.userId);var s=L();this.startConnection(a,s)}else console.log("NO TOKEN")}},{key:"componentDidUpdate",value:function(e){e.location.pathname!==this.props.location.pathname&&(this.props.location.pathname.includes("/my-account")?this.setState({hideFooter:!0}):this.setState({hideFooter:!1}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.listenToScroll)}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,s=t.hideScrollBar,o=t.hideFooter,c=t.scrolled,l=t.scrollDirection,i=window.innerWidth;return!0!==a&&this.props.brandAndModelsData?r.a.createElement(b.Spring,{from:{marginTop:1e3},to:{marginTop:0},config:{delay:500}},(function(t){return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"app"},i>850&&r.a.createElement(n.Fragment,null,r.a.createElement(T,{scrolled:c,scrollDirection:l}),r.a.createElement(P,{scrolled:c,scrollDirection:l})),i<=850&&r.a.createElement(H,{logoutHandler:e.logoutHandler}),r.a.createElement("audio",{src:C.a,ref:function(t){return e.player=t}}),i>600&&e.props.auth&&e.props.token&&e.props.userId&&r.a.createElement(B,{playNotificationSound:e.playNotificationSound}),r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/Car-dealer/Car-dealer/",render:function(t){return r.a.createElement(_e,Object.assign({},t,{carsHomeIntro:e.state.carsHomeIntro,carsHomeInventory:e.state.carsHomeInventory}))}}),r.a.createElement(d.a,{path:"/Car-dealer/Car-dealer/inventory/:prodId",render:function(t){return r.a.createElement(we,Object.assign({},t,{hideScrollBar:s,showScrollBarHandler:e.showScrollBarHandler,hideScrollBarHandler:e.hideScrollBarHandler}))}}),r.a.createElement(d.a,{path:"/Car-dealer/Car-dealer/inventory",component:fe}),r.a.createElement(d.a,{path:"/Car-dealer/Car-dealer/auth",component:Ie}),r.a.createElement(d.a,{path:"/Car-dealer/Car-dealer/my-account",render:function(t){return r.a.createElement(ke,Object.assign({},t,{logoutHandler:e.logoutHandler}))}}),r.a.createElement(d.a,{path:"/Car-dealer/Car-dealer/services",component:De})),r.a.createElement(q,{hide:o})))})):r.a.createElement(V,null)}}]),t}(n.Component),xe=Object(p.b)((function(e){return{auth:e.auth.auth,token:e.auth.token,userId:e.auth.userId,connectionId:e.auth.connectionId,brandAndModelsData:e.product.brandAndModelsData,lang:e.parameters.lang,currency:e.parameters.currency}}),(function(e){return{setLoginStateToTrue:function(t){return e(function(e){return{type:"SET_LOGIN_STATE_TO_TRUE",isAuth:e.isAuth,token:e.token,userId:e.userId,userName:e.userName}}(t))},setLoginStateToFalse:function(){return e({type:"SET_LOGIN_STATE_TO_FALSE"})},setConnectionId:function(t){return e({type:"SET_CONNECTION_ID",connectionId:t})},initAppData:function(t){return e(function(e){return{type:"INIT_APP_DATA",data:e}}(t))},setUserFavoriteProducts:function(t){return e(function(e){return{type:"SET_USER_FAVORITE_PRODUCTS",favorites:e}}(t))}}}))(Object(d.f)(qe));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Le=a(26),Ae=function(e,t){return Object(I.a)({},e,{},t)},Re={auth:!1,token:null,userId:null,connectionId:null,userName:null},Me=function(e,t){return Ae(e,{auth:!0,token:t.token,userId:t.userId,connectionId:t.connectionId,userName:t.userName})},Fe=function(e,t){return Ae(e,{auth:t.isAuth,token:t.token,userId:t.userId,userName:t.userName})},Ue=function(e){return Ae(e,{auth:!1,token:null,userId:null,userName:null,connectionId:null})},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCEDED":return Me(e,t);case"LOGIN_FAILED":return;case"SET_LOGIN_STATE_TO_TRUE":return Fe(e,t);case"SET_LOGIN_STATE_TO_FALSE":return Ue(e);case"SET_CONNECTION_ID":return Ae(e,{connectionId:t.connectionId});default:return e}},Ve={brandAndModelsData:null,mostPopularProducts:null,price:null,mostPopularSedan:null,productRequested:null,bodyTypeList:null,totalProductsCounter:null,currentInventoryPage:1,itemsPerPage:20},Ge=function(e,t){return Ae(e,{brandAndModelsData:t.data.brandAndModelsData,mostPopularProducts:t.data.mostPopularProducts,price:t.data.price,mostPopularSedan:t.data.mostPopularSedan,bodyTypeList:t.data.bodyTypeList,totalProductsCounter:t.data.totalProductsCounter})},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRODUCT_REQUESTED_ID":return Ae(e,{productRequested:t.data});case"INIT_APP_DATA":return Ge(e,t);case"SET_INVENTORY_CURRENT_PAGE":return Ae(e,{currentInventoryPage:t.currentPage});case"SET_PRICE":return Ae(e,{price:t.data});default:return e}},We={favorites:[]},ze=function(e,t){return Ae(e,{favorites:[].concat(Object(x.a)(e.favorites),[t.product])})},Je=function(e,t){var a=e.favorites.filter((function(e){return e._id!==t.product._id}));return Ae(e,{favorites:a})},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_FAVORITE_PRODUCTS":return Ae(e,{favorites:t.favorites});case"ADD_USER_FAVORITE_PRODUCT":return ze(e,t);case"REMOVE_USER_FAVORITE_PRODUCT":return Je(e,t);default:return e}},Xe={lang:"english",currency:"CAD",quotes:{USDCAD:1.32357,USDEUR:.92693,EURUSD:1.0788,EURCAD:1.4289,CADUSD:.7555,CADEUR:.6998}},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LANG":return Ae(e,{lang:t.lang});case"SET_CURRENCY":return Ae(e,{currency:t.currency});default:return e}},Qe={newMessage:0},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_A_NEW_MESSAGE_NOTIFICATION":return Ae(e,{newMessage:e.newMessage+t.data});case"RESET_NEW_MESSAGE_NOTIFICATION":return Ae(e,{newMessage:0});default:return e}},et=a(77),tt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Le.d,at=Object(Le.c)({auth:Be,product:Ye,user:Ke,parameters:$e,notification:Ze}),nt=Object(Le.e)(at,tt(Object(Le.a)(et.a)));o.a.render(r.a.createElement(p.a,{store:nt},r.a.createElement(c.a,null,r.a.createElement(xe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},69:function(e,t,a){e.exports=a.p+"static/media/eventually.b5e7acad.mp3"},70:function(e,t,a){e.exports=a.p+"static/media/sprite.be8a817b.svg"},78:function(e,t,a){e.exports=a(191)},83:function(e,t,a){}},[[78,1,2]]]);
//# sourceMappingURL=main.25a93e9f.chunk.js.map